<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta http-equiv="description" content="top.html">
   <meta http-equiv="keywords" content="tl-verilog">

   <title>top.m4</title>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
   <script src="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/ide.js"></script>
   <link rel="stylesheet" href="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/ide.css" />

<style>
/*
Copyright (c) 2015, Steven F. Hoover
All rights reserved.
*/
.tlv_ident_error {
  color: red;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipeline {
  color: orange;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_1 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_2 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_grouping {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_state_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_assigned_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_state_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_malformed_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_malformed_assigned_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_phys_hier {
  color: blue;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_phys_beh_hier {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_stage_name {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_next_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_incr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_prev_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_decr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_alignment_expr_1ab {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_expr_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_keyword_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_zero_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_crosspipe_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_tlv_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_misc_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_sv_sig {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_datatype {
  color: DarkRed;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_keyword1 {
  color: Blue;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_comment {
  color: #808080;
  font-style: italic;
  font-weight: 600;
}
.tlv_ident_hdl_code {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}

</style>

</head>

<body>

<h2>top.m4</h2>

<pre>
<span class="line" line-num="1" source-line-num="1"><span class="tlv_ident_keyword1">\TLV_version 1d: tl-x.org</span></span>
<span class="line" line-num="2" source-line-num="2"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="3" source-line-num="3"></span>
<span class="line" line-num="4" source-line-num="4"> <span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="5" source-line-num="5"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="6" source-line-num="6"><span class="tlv_ident_comment">// Filename: 	axil2axis</span></span>
<span class="line" line-num="7" source-line-num="7"><span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="8" source-line-num="8"><span class="tlv_ident_comment">// Project:	WB2AXIPSP: bus bridges and other odds and ends</span></span>
<span class="line" line-num="9" source-line-num="9"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="10" source-line-num="10"><span class="tlv_ident_comment">// Purpose:	Demonstrates a simple AXI-Lite interface to drive an AXI-Stream</span></span>
<span class="line" line-num="11" source-line-num="11"><span class="tlv_ident_comment">//		channel.  This can then be used to debug DSP processing.</span></span>
<span class="line" line-num="12" source-line-num="12"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="13" source-line-num="13"><span class="tlv_ident_comment">// Registers:	This AXI-lite to AXI-Stream core supports four word-sized</span></span>
<span class="line" line-num="14" source-line-num="14"><span class="tlv_ident_comment">//		addresses.  Byte enables are ignored.</span></span>
<span class="line" line-num="15" source-line-num="15"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="16" source-line-num="16"><span class="tlv_ident_comment">//   2'b00, ADDR_SINK</span></span>
<span class="line" line-num="17" source-line-num="17"><span class="tlv_ident_comment">//		Writes to this register will send data to the stream master,</span></span>
<span class="line" line-num="18" source-line-num="18"><span class="tlv_ident_comment">//		with TLAST clear.  Data goes first through a FIFO.  If the</span></span>
<span class="line" line-num="19" source-line-num="19"><span class="tlv_ident_comment">//		FIFO is full, the write will stall.  If it stalls OPT_TIMEOUT</span></span>
<span class="line" line-num="20" source-line-num="20"><span class="tlv_ident_comment">//		cycles, the write will fail and return a bus error.</span></span>
<span class="line" line-num="21" source-line-num="21"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="22" source-line-num="22"><span class="tlv_ident_comment">//		Reads from this register will return data from the stream slave,</span></span>
<span class="line" line-num="23" source-line-num="23"><span class="tlv_ident_comment">//		but without consuming it.  Values read here may still be read</span></span>
<span class="line" line-num="24" source-line-num="24"><span class="tlv_ident_comment">//		from the ADDR_SOURCE register later.</span></span>
<span class="line" line-num="25" source-line-num="25"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="26" source-line-num="26"><span class="tlv_ident_comment">//   2'b01, ADDR_SOURCE</span></span>
<span class="line" line-num="27" source-line-num="27"><span class="tlv_ident_comment">//		Writes to this register will send data downstream to the stream</span></span>
<span class="line" line-num="28" source-line-num="28"><span class="tlv_ident_comment">//		master as well, but this time with TLAST set.</span></span>
<span class="line" line-num="29" source-line-num="29"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="30" source-line-num="30"><span class="tlv_ident_comment">//		Reads from this register will accept a value from the stream</span></span>
<span class="line" line-num="31" source-line-num="31"><span class="tlv_ident_comment">//		slave interface.  The read value contains TDATA.  TLAST is</span></span>
<span class="line" line-num="32" source-line-num="32"><span class="tlv_ident_comment">//		ignored in this read.  If you want access to TLAST, you can get</span></span>
<span class="line" line-num="33" source-line-num="33"><span class="tlv_ident_comment">//		it from the ADDR_FIFO register.</span></span>
<span class="line" line-num="34" source-line-num="34"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="35" source-line-num="35"><span class="tlv_ident_comment">//		If there is no data to be read, the read will not and does not</span></span>
<span class="line" line-num="36" source-line-num="36"><span class="tlv_ident_comment">//		stall.  It will instead return a bus error.</span></span>
<span class="line" line-num="37" source-line-num="37"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="38" source-line-num="38"><span class="tlv_ident_comment">//   2'b10, ADDR_STATS</span></span>
<span class="line" line-num="39" source-line-num="39"><span class="tlv_ident_comment">//		Since we can, we'll handle some statistics  here.  The top half</span></span>
<span class="line" line-num="40" source-line-num="40"><span class="tlv_ident_comment">//		word contains two counters: a 4-bit counter of TLAST's issued</span></span>
<span class="line" line-num="41" source-line-num="41"><span class="tlv_ident_comment">//		from the stream master, and a 12-bit counter of TDATA values</span></span>
<span class="line" line-num="42" source-line-num="42"><span class="tlv_ident_comment">//		issued.  Neither counter includes data still contained in the</span></span>
<span class="line" line-num="43" source-line-num="43"><span class="tlv_ident_comment">//		FIFO.  If the OPT_SOURCE option is clear, these values will</span></span>
<span class="line" line-num="44" source-line-num="44"><span class="tlv_ident_comment">//		always be zero.</span></span>
<span class="line" line-num="45" source-line-num="45"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="46" source-line-num="46"><span class="tlv_ident_comment">//		The second (bottom, or least-significant) halfword contains the</span></span>
<span class="line" line-num="47" source-line-num="47"><span class="tlv_ident_comment">//		same regarding the stream slave.  If OPT_SINK is set, these</span></span>
<span class="line" line-num="48" source-line-num="48"><span class="tlv_ident_comment">//		counters count values read from the core.  If OPT_SINK is clear,</span></span>
<span class="line" line-num="49" source-line-num="49"><span class="tlv_ident_comment">//		so that the stream sink is not truly implemented, then TREADY</span></span>
<span class="line" line-num="50" source-line-num="50"><span class="tlv_ident_comment">//		will be held high and the counter will just count values coming</span></span>
<span class="line" line-num="51" source-line-num="51"><span class="tlv_ident_comment">//		into the core never going into the FIFO.</span></span>
<span class="line" line-num="52" source-line-num="52"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="53" source-line-num="53"><span class="tlv_ident_comment">//   2'b11, ADDR_FIFO</span></span>
<span class="line" line-num="54" source-line-num="54"><span class="tlv_ident_comment">//		Working with the core can be a challenge.  You want to make</span></span>
<span class="line" line-num="55" source-line-num="55"><span class="tlv_ident_comment">//		certain that writing to the core  doesn't hang the design, and</span></span>
<span class="line" line-num="56" source-line-num="56"><span class="tlv_ident_comment">//		that reading from the core doesn't cause a bus error.</span></span>
<span class="line" line-num="57" source-line-num="57"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="58" source-line-num="58"><span class="tlv_ident_comment">//		Bits 31:16 contain the number of items in the write FIFO, and</span></span>
<span class="line" line-num="59" source-line-num="59"><span class="tlv_ident_comment">//		bits 14:0 contain the number of items in the read FIFO.</span></span>
<span class="line" line-num="60" source-line-num="60"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="61" source-line-num="61"><span class="tlv_ident_comment">//		Bit 15 contains whether or not the next item to be read is</span></span>
<span class="line" line-num="62" source-line-num="62"><span class="tlv_ident_comment">//		the last item in a packet, i.e. with TLAST set.</span></span>
<span class="line" line-num="63" source-line-num="63"><span class="tlv_ident_comment">//		</span></span>
<span class="line" line-num="64" source-line-num="64"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="65" source-line-num="65"><span class="tlv_ident_comment">// Creator:	Dan Gisselquist, Ph.D.</span></span>
<span class="line" line-num="66" source-line-num="66"><span class="tlv_ident_comment">//		Gisselquist Technology, LLC</span></span>
<span class="line" line-num="67" source-line-num="67"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="68" source-line-num="68"><span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="69" source-line-num="69"><span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="70" source-line-num="70"><span class="tlv_ident_comment">// Copyright (C) 2020, Gisselquist Technology, LLC</span></span>
<span class="line" line-num="71" source-line-num="71"><span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="72" source-line-num="72"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="73" source-line-num="73"><span class="tlv_ident_comment">// This file is part of the WB2AXIP project.</span></span>
<span class="line" line-num="74" source-line-num="74"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="75" source-line-num="75"><span class="tlv_ident_comment">// The WB2AXIP project contains free software and gateware, licensed under the</span></span>
<span class="line" line-num="76" source-line-num="76"><span class="tlv_ident_comment">// Apache License, Version 2.0 (the &quot;License&quot;).  You may not use this project,</span></span>
<span class="line" line-num="77" source-line-num="77"><span class="tlv_ident_comment">// or this file, except in compliance with the License.  You may obtain a copy</span></span>
<span class="line" line-num="78" source-line-num="78"><span class="tlv_ident_comment">// of the License at</span></span>
<span class="line" line-num="79" source-line-num="79"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="80" source-line-num="80"><span class="tlv_ident_comment">//	http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line" line-num="81" source-line-num="81"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="82" source-line-num="82"><span class="tlv_ident_comment">// Unless required by applicable law or agreed to in writing, software</span></span>
<span class="line" line-num="83" source-line-num="83"><span class="tlv_ident_comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></span>
<span class="line" line-num="84" source-line-num="84"><span class="tlv_ident_comment">// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the</span></span>
<span class="line" line-num="85" source-line-num="85"><span class="tlv_ident_comment">// License for the specific language governing permissions and limitations</span></span>
<span class="line" line-num="86" source-line-num="86"><span class="tlv_ident_comment">// under the License.</span></span>
<span class="line" line-num="87" source-line-num="87"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="88" source-line-num="88"><span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="89" source-line-num="89"><span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="90" source-line-num="90"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="91" source-line-num="91"><span class="tlv_ident_hdl_code">`default_nettype none</span></span>
<span class="line" line-num="92" source-line-num="92"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="93" source-line-num="93"><span class="tlv_ident_hdl_code">module	axil2axis #(</span></span>
<span class="line" line-num="94" source-line-num="94">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="95" source-line-num="95">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="96" source-line-num="96">		<span class="tlv_ident_comment">// Size of the AXI-lite bus.  These are fixed, since 1) AXI-lite</span></span>
<span class="line" line-num="97" source-line-num="97">		<span class="tlv_ident_comment">// is fixed at a width of 32-bits by Xilinx def'n, and 2) since</span></span>
<span class="line" line-num="98" source-line-num="98">		<span class="tlv_ident_comment">// we only ever have 4 configuration words.</span></span>
<span class="line" line-num="99" source-line-num="99">		<span class="tlv_ident_hdl_code">parameter	C_AXI_ADDR_WIDTH = 4,</span></span>
<span class="line" line-num="100" source-line-num="100">		<span class="tlv_ident_hdl_code">localparam	C_AXI_DATA_WIDTH = 32,</span></span>
<span class="line" line-num="101" source-line-num="101">		<span class="tlv_ident_hdl_code">parameter	C_AXIS_DATA_WIDTH = 16,</span></span>
<span class="line" line-num="102" source-line-num="102">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="103" source-line-num="103">		<span class="tlv_ident_comment">// OPT_SOURCE enables the AXI stream master logic.  If not</span></span>
<span class="line" line-num="104" source-line-num="104">		<span class="tlv_ident_comment">// enabled, M_AXI_TVALID will be held at zero, and the stream</span></span>
<span class="line" line-num="105" source-line-num="105">		<span class="tlv_ident_comment">// master logic may be ignored.</span></span>
<span class="line" line-num="106" source-line-num="106">		<span class="tlv_ident_hdl_code">parameter [0:0] OPT_SOURCE = 1'b1,</span></span>
<span class="line" line-num="107" source-line-num="107">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="108" source-line-num="108">		<span class="tlv_ident_comment">// OPT_SINK enables the AXI stream slave logic.  If not enabled,</span></span>
<span class="line" line-num="109" source-line-num="109">		<span class="tlv_ident_comment">// reads will always return zero, and S_AXIS_TREADY will be</span></span>
<span class="line" line-num="110" source-line-num="110">		<span class="tlv_ident_comment">// held high.</span></span>
<span class="line" line-num="111" source-line-num="111">		<span class="tlv_ident_hdl_code">parameter [0:0] OPT_SINK = 1'b1,</span></span>
<span class="line" line-num="112" source-line-num="112">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="113" source-line-num="113">		<span class="tlv_ident_comment">// If OPT_SIGN_EXTEND is set, values received will be sign</span></span>
<span class="line" line-num="114" source-line-num="114">		<span class="tlv_ident_comment">// extended to fill the full data width on read.  Otherwise</span></span>
<span class="line" line-num="115" source-line-num="115">		<span class="tlv_ident_comment">// the most significant of any unused bits will remain clear.</span></span>
<span class="line" line-num="116" source-line-num="116">		<span class="tlv_ident_hdl_code">parameter [0:0] OPT_SIGN_EXTEND = 1'b0,</span></span>
<span class="line" line-num="117" source-line-num="117">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="118" source-line-num="118">		<span class="tlv_ident_comment">// Data written to this core will be placed into a FIFO before</span></span>
<span class="line" line-num="119" source-line-num="119">		<span class="tlv_ident_comment">// entering the AXI stream master.  LGFIFO is the log, based</span></span>
<span class="line" line-num="120" source-line-num="120">		<span class="tlv_ident_comment">// two, of the number of words in this FIFO.  Similarly, data</span></span>
<span class="line" line-num="121" source-line-num="121">		<span class="tlv_ident_comment">// consumed by AXI stream slave contained in this core will go</span></span>
<span class="line" line-num="122" source-line-num="122">		<span class="tlv_ident_comment">// first into a read FIFO.  Reads from the core will then return</span></span>
<span class="line" line-num="123" source-line-num="123">		<span class="tlv_ident_comment">// data from this FIFO, or a bus error if none is available.</span></span>
<span class="line" line-num="124" source-line-num="124">		<span class="tlv_ident_hdl_code">parameter 	LGFIFO = 5,</span></span>
<span class="line" line-num="125" source-line-num="125">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="126" source-line-num="126">		<span class="tlv_ident_comment">// OPT_TIMEOUT, if non-zero, will allow writes to the stream</span></span>
<span class="line" line-num="127" source-line-num="127">		<span class="tlv_ident_comment">// master, or reads from the stream slave, to stall the core</span></span>
<span class="line" line-num="128" source-line-num="128">		<span class="tlv_ident_comment">// for OPT_TIMEOUT cycles for the stream to be ready.  If the</span></span>
<span class="line" line-num="129" source-line-num="129">		<span class="tlv_ident_comment">// stream isn't ready at this time (i.e. if the write FIFO is</span></span>
<span class="line" line-num="130" source-line-num="130">		<span class="tlv_ident_comment">// still full, or the read FIFO still empty), the result will</span></span>
<span class="line" line-num="131" source-line-num="131">		<span class="tlv_ident_comment">// be returned as a bus error.  Likewise, if OPT_TIMEOUT==0,</span></span>
<span class="line" line-num="132" source-line-num="132">		<span class="tlv_ident_comment">// the core will always return a bus error if ever the write</span></span>
<span class="line" line-num="133" source-line-num="133">		<span class="tlv_ident_comment">// FIFO is full or the read FIFO empty.</span></span>
<span class="line" line-num="134" source-line-num="134">		<span class="tlv_ident_hdl_code">parameter	OPT_TIMEOUT = 5,</span></span>
<span class="line" line-num="135" source-line-num="135">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="136" source-line-num="136">		<span class="tlv_ident_comment">// OPT_LOWPOWER sets outputs to zero if not valid.  This applies</span></span>
<span class="line" line-num="137" source-line-num="137">		<span class="tlv_ident_comment">// to the AXI-lite bus, however, and not the AXI stream FIFOs,</span></span>
<span class="line" line-num="138" source-line-num="138">		<span class="tlv_ident_comment">// since those don't have LOWPOWER support (currently).</span></span>
<span class="line" line-num="139" source-line-num="139">		<span class="tlv_ident_hdl_code">parameter [0:0]	OPT_LOWPOWER = 0,</span></span>
<span class="line" line-num="140" source-line-num="140">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="141" source-line-num="141">		<span class="tlv_ident_comment">// This design currently ignores WSTRB, beyond checking that it</span></span>
<span class="line" line-num="142" source-line-num="142">		<span class="tlv_ident_comment">// is not zero.  I see no easy way to add it.  (I'll leave that</span></span>
<span class="line" line-num="143" source-line-num="143">		<span class="tlv_ident_comment">// to you to implement, if you wish.)</span></span>
<span class="line" line-num="144" source-line-num="144">		<span class="tlv_ident_comment">// parameter [0:0]	OPT_WSTRB = 0,</span></span>
<span class="line" line-num="145" source-line-num="145">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="146" source-line-num="146">		<span class="tlv_ident_hdl_code">localparam	ADDRLSB = $clog2(C_AXI_DATA_WIDTH)-3</span></span>
<span class="line" line-num="147" source-line-num="147">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="148" source-line-num="148">	<span class="tlv_ident_hdl_code">) (</span></span>
<span class="line" line-num="149" source-line-num="149">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="150" source-line-num="150">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_ACLK,</span></span>
<span class="line" line-num="151" source-line-num="151">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_ARESETN,</span></span>
<span class="line" line-num="152" source-line-num="152">		<span class="tlv_ident_comment">// AXI-lite signals</span></span>
<span class="line" line-num="153" source-line-num="153">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="154" source-line-num="154">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_AWVALID,</span></span>
<span class="line" line-num="155" source-line-num="155">		<span class="tlv_ident_hdl_code">output	wire					S_AXI_AWREADY,</span></span>
<span class="line" line-num="156" source-line-num="156">		<span class="tlv_ident_hdl_code">input	wire	[C_AXI_ADDR_WIDTH-1:0]		S_AXI_AWADDR,</span></span>
<span class="line" line-num="157" source-line-num="157">		<span class="tlv_ident_hdl_code">input	wire	[2:0]				S_AXI_AWPROT,</span></span>
<span class="line" line-num="158" source-line-num="158">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="159" source-line-num="159">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_WVALID,</span></span>
<span class="line" line-num="160" source-line-num="160">		<span class="tlv_ident_hdl_code">output	wire					S_AXI_WREADY,</span></span>
<span class="line" line-num="161" source-line-num="161">		<span class="tlv_ident_hdl_code">input	wire	[C_AXI_DATA_WIDTH-1:0]		S_AXI_WDATA,</span></span>
<span class="line" line-num="162" source-line-num="162">		<span class="tlv_ident_hdl_code">input	wire	[C_AXI_DATA_WIDTH/8-1:0]	S_AXI_WSTRB,</span></span>
<span class="line" line-num="163" source-line-num="163">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="164" source-line-num="164">		<span class="tlv_ident_hdl_code">output	wire					S_AXI_BVALID,</span></span>
<span class="line" line-num="165" source-line-num="165">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_BREADY,</span></span>
<span class="line" line-num="166" source-line-num="166">		<span class="tlv_ident_hdl_code">output	wire	[1:0]				S_AXI_BRESP,</span></span>
<span class="line" line-num="167" source-line-num="167">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="168" source-line-num="168">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_ARVALID,</span></span>
<span class="line" line-num="169" source-line-num="169">		<span class="tlv_ident_hdl_code">output	wire					S_AXI_ARREADY,</span></span>
<span class="line" line-num="170" source-line-num="170">		<span class="tlv_ident_hdl_code">input	wire	[C_AXI_ADDR_WIDTH-1:0]		S_AXI_ARADDR,</span></span>
<span class="line" line-num="171" source-line-num="171">		<span class="tlv_ident_hdl_code">input	wire	[2:0]				S_AXI_ARPROT,</span></span>
<span class="line" line-num="172" source-line-num="172">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="173" source-line-num="173">		<span class="tlv_ident_hdl_code">output	wire					S_AXI_RVALID,</span></span>
<span class="line" line-num="174" source-line-num="174">		<span class="tlv_ident_hdl_code">input	wire					S_AXI_RREADY,</span></span>
<span class="line" line-num="175" source-line-num="175">		<span class="tlv_ident_hdl_code">output	wire	[C_AXI_DATA_WIDTH-1:0]		S_AXI_RDATA,</span></span>
<span class="line" line-num="176" source-line-num="176">		<span class="tlv_ident_hdl_code">output	wire	[1:0]				S_AXI_RRESP,</span></span>
<span class="line" line-num="177" source-line-num="177">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="178" source-line-num="178">		<span class="tlv_ident_comment">// AXI stream slave (sink) signals</span></span>
<span class="line" line-num="179" source-line-num="179">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="180" source-line-num="180">		<span class="tlv_ident_hdl_code">input	wire				S_AXIS_TVALID,</span></span>
<span class="line" line-num="181" source-line-num="181">		<span class="tlv_ident_hdl_code">output	reg				S_AXIS_TREADY,</span></span>
<span class="line" line-num="182" source-line-num="182">		<span class="tlv_ident_hdl_code">input	wire	[C_AXIS_DATA_WIDTH-1:0]	S_AXIS_TDATA,</span></span>
<span class="line" line-num="183" source-line-num="183">		<span class="tlv_ident_hdl_code">input	wire				S_AXIS_TLAST,</span></span>
<span class="line" line-num="184" source-line-num="184">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="185" source-line-num="185">		<span class="tlv_ident_comment">// AXI stream master (source) signals</span></span>
<span class="line" line-num="186" source-line-num="186">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="187" source-line-num="187">		<span class="tlv_ident_hdl_code">output	reg				M_AXIS_TVALID,</span></span>
<span class="line" line-num="188" source-line-num="188">		<span class="tlv_ident_hdl_code">input	wire				M_AXIS_TREADY,</span></span>
<span class="line" line-num="189" source-line-num="189">		<span class="tlv_ident_hdl_code">output	reg	[C_AXIS_DATA_WIDTH-1:0]	M_AXIS_TDATA,</span></span>
<span class="line" line-num="190" source-line-num="190">		<span class="tlv_ident_hdl_code">output	reg				M_AXIS_TLAST</span></span>
<span class="line" line-num="191" source-line-num="191">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="192" source-line-num="192">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="193" source-line-num="193">	<span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="194" source-line-num="194"></span>
<span class="line" line-num="195" source-line-num="195">	<span class="tlv_ident_hdl_code">localparam	[1:0]	ADDR_SINK = 2'b00,	</span><span class="tlv_ident_comment">// Read from stream</span></span>
<span class="line" line-num="196" source-line-num="196">				<span class="tlv_ident_hdl_code">ADDR_SOURCE = 2'b01, </span><span class="tlv_ident_comment">// Write, also sets TLAST</span></span>
<span class="line" line-num="197" source-line-num="197">				<span class="tlv_ident_hdl_code">ADDR_STATS  = 2'b10,</span></span>
<span class="line" line-num="198" source-line-num="198">				<span class="tlv_ident_hdl_code">ADDR_FIFO   = 2'b11;</span></span>
<span class="line" line-num="199" source-line-num="199">	<span class="tlv_ident_hdl_code">localparam	SW = C_AXIS_DATA_WIDTH;</span></span>
<span class="line" line-num="200" source-line-num="200"></span>
<span class="line" line-num="201" source-line-num="201">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="202" source-line-num="202">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="203" source-line-num="203">	<span class="tlv_ident_comment">// Register/wire signal declarations</span></span>
<span class="line" line-num="204" source-line-num="204">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="205" source-line-num="205">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="206" source-line-num="206">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="207" source-line-num="207">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="208" source-line-num="208">	<span class="tlv_ident_hdl_code">wire	i_reset = !S_AXI_ARESETN;</span></span>
<span class="line" line-num="209" source-line-num="209"></span>
<span class="line" line-num="210" source-line-num="210">	<span class="tlv_ident_hdl_code">wire				axil_write_ready;</span></span>
<span class="line" line-num="211" source-line-num="211">	<span class="tlv_ident_hdl_code">wire	[C_AXI_ADDR_WIDTH-ADDRLSB-1:0]	awskd_addr;</span></span>
<span class="line" line-num="212" source-line-num="212">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="213" source-line-num="213">	<span class="tlv_ident_hdl_code">wire	[C_AXI_DATA_WIDTH-1:0]	wskd_data;</span></span>
<span class="line" line-num="214" source-line-num="214">	<span class="tlv_ident_hdl_code">wire [C_AXI_DATA_WIDTH/8-1:0]	wskd_strb;</span></span>
<span class="line" line-num="215" source-line-num="215">	<span class="tlv_ident_hdl_code">reg				axil_bvalid, axil_berr;</span></span>
<span class="line" line-num="216" source-line-num="216">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="217" source-line-num="217">	<span class="tlv_ident_hdl_code">wire				axil_read_ready;</span></span>
<span class="line" line-num="218" source-line-num="218">	<span class="tlv_ident_hdl_code">wire	[C_AXI_ADDR_WIDTH-ADDRLSB-1:0]	arskd_addr;</span></span>
<span class="line" line-num="219" source-line-num="219">	<span class="tlv_ident_hdl_code">reg	[C_AXI_DATA_WIDTH-1:0]	axil_read_data;</span></span>
<span class="line" line-num="220" source-line-num="220">	<span class="tlv_ident_hdl_code">reg				axil_read_valid;</span></span>
<span class="line" line-num="221" source-line-num="221"></span>
<span class="line" line-num="222" source-line-num="222">	<span class="tlv_ident_hdl_code">wire			awskd_valid, wskd_valid;</span></span>
<span class="line" line-num="223" source-line-num="223">	<span class="tlv_ident_hdl_code">wire			wfifo_full, wfifo_write, wfifo_empty;</span></span>
<span class="line" line-num="224" source-line-num="224">	<span class="tlv_ident_hdl_code">wire	[LGFIFO:0]	wfifo_fill;</span></span>
<span class="line" line-num="225" source-line-num="225">	<span class="tlv_ident_hdl_code">reg			write_timeout;</span></span>
<span class="line" line-num="226" source-line-num="226"></span>
<span class="line" line-num="227" source-line-num="227">	<span class="tlv_ident_hdl_code">reg			read_timeout;</span></span>
<span class="line" line-num="228" source-line-num="228">	<span class="tlv_ident_hdl_code">reg			axil_rerr;</span></span>
<span class="line" line-num="229" source-line-num="229">	<span class="tlv_ident_hdl_code">reg	[3:0]		read_bursts_completed;</span></span>
<span class="line" line-num="230" source-line-num="230">	<span class="tlv_ident_hdl_code">reg	[11:0]		reads_completed;</span></span>
<span class="line" line-num="231" source-line-num="231"></span>
<span class="line" line-num="232" source-line-num="232">	<span class="tlv_ident_hdl_code">reg	[3:0]	write_bursts_completed;</span></span>
<span class="line" line-num="233" source-line-num="233">	<span class="tlv_ident_hdl_code">reg	[11:0]	writes_completed;</span></span>
<span class="line" line-num="234" source-line-num="234"></span>
<span class="line" line-num="235" source-line-num="235"></span>
<span class="line" line-num="236" source-line-num="236">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="237" source-line-num="237">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="238" source-line-num="238">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="239" source-line-num="239">	<span class="tlv_ident_comment">// AXI-lite signaling</span></span>
<span class="line" line-num="240" source-line-num="240">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="241" source-line-num="241">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="242" source-line-num="242">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="243" source-line-num="243">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="244" source-line-num="244"></span>
<span class="line" line-num="245" source-line-num="245">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="246" source-line-num="246">	<span class="tlv_ident_comment">// Write signaling</span></span>
<span class="line" line-num="247" source-line-num="247">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="248" source-line-num="248">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="249" source-line-num="249">	<span class="tlv_ident_hdl_code">skidbuffer #(.OPT_OUTREG(0),</span></span>
<span class="line" line-num="250" source-line-num="250">			<span class="tlv_ident_hdl_code">.OPT_LOWPOWER(OPT_LOWPOWER),</span></span>
<span class="line" line-num="251" source-line-num="251">			<span class="tlv_ident_hdl_code">.DW(C_AXI_ADDR_WIDTH-ADDRLSB))</span></span>
<span class="line" line-num="252" source-line-num="252">	<span class="tlv_ident_hdl_code">axilawskid(</span><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="253" source-line-num="253">		<span class="tlv_ident_hdl_code">.i_clk(S_AXI_ACLK), .i_reset(i_reset),</span></span>
<span class="line" line-num="254" source-line-num="254">		<span class="tlv_ident_hdl_code">.i_valid(S_AXI_AWVALID), .o_ready(S_AXI_AWREADY),</span></span>
<span class="line" line-num="255" source-line-num="255">		<span class="tlv_ident_hdl_code">.i_data(S_AXI_AWADDR[C_AXI_ADDR_WIDTH-1:ADDRLSB]),</span></span>
<span class="line" line-num="256" source-line-num="256">		<span class="tlv_ident_hdl_code">.o_valid(awskd_valid), .i_ready(axil_write_ready),</span></span>
<span class="line" line-num="257" source-line-num="257">		<span class="tlv_ident_hdl_code">.o_data(awskd_addr));</span></span>
<span class="line" line-num="258" source-line-num="258"></span>
<span class="line" line-num="259" source-line-num="259">	<span class="tlv_ident_hdl_code">skidbuffer #(.OPT_OUTREG(0),</span></span>
<span class="line" line-num="260" source-line-num="260">			<span class="tlv_ident_hdl_code">.OPT_LOWPOWER(OPT_LOWPOWER),</span></span>
<span class="line" line-num="261" source-line-num="261">			<span class="tlv_ident_hdl_code">.DW(C_AXI_DATA_WIDTH+C_AXI_DATA_WIDTH/8))</span></span>
<span class="line" line-num="262" source-line-num="262">	<span class="tlv_ident_hdl_code">axilwskid(</span><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="263" source-line-num="263">		<span class="tlv_ident_hdl_code">.i_clk(S_AXI_ACLK), .i_reset(i_reset),</span></span>
<span class="line" line-num="264" source-line-num="264">		<span class="tlv_ident_hdl_code">.i_valid(S_AXI_WVALID), .o_ready(S_AXI_WREADY),</span></span>
<span class="line" line-num="265" source-line-num="265">		<span class="tlv_ident_hdl_code">.i_data({ S_AXI_WDATA, S_AXI_WSTRB }),</span></span>
<span class="line" line-num="266" source-line-num="266">		<span class="tlv_ident_hdl_code">.o_valid(wskd_valid), .i_ready(axil_write_ready),</span></span>
<span class="line" line-num="267" source-line-num="267">		<span class="tlv_ident_hdl_code">.o_data({ wskd_data, wskd_strb }));</span></span>
<span class="line" line-num="268" source-line-num="268"></span>
<span class="line" line-num="269" source-line-num="269">	<span class="tlv_ident_hdl_code">assign	axil_write_ready = awskd_valid &amp;&amp; wskd_valid</span></span>
<span class="line" line-num="270" source-line-num="270">			<span class="tlv_ident_hdl_code">&amp;&amp; (!S_AXI_BVALID || S_AXI_BREADY)</span></span>
<span class="line" line-num="271" source-line-num="271">			<span class="tlv_ident_hdl_code">&amp;&amp; ((awskd_addr[1] != ADDR_SOURCE[1])</span></span>
<span class="line" line-num="272" source-line-num="272">				<span class="tlv_ident_hdl_code">|| (!wfifo_full || write_timeout));</span></span>
<span class="line" line-num="273" source-line-num="273"></span>
<span class="line" line-num="274" source-line-num="274">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="275" source-line-num="275">	<span class="tlv_ident_comment">// Write timeout generation</span></span>
<span class="line" line-num="276" source-line-num="276">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="277" source-line-num="277">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="278" source-line-num="278">	<span class="tlv_ident_hdl_code">generate if ((OPT_TIMEOUT &gt; 1) &amp;&amp; OPT_SOURCE)</span></span>
<span class="line" line-num="279" source-line-num="279">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="280" source-line-num="280"></span>
<span class="line" line-num="281" source-line-num="281">		<span class="tlv_ident_hdl_code">reg [$clog2(OPT_TIMEOUT)-1:0] write_timer;</span></span>
<span class="line" line-num="282" source-line-num="282"></span>
<span class="line" line-num="283" source-line-num="283">		<span class="tlv_ident_hdl_code">initial	write_timer = OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="284" source-line-num="284">		<span class="tlv_ident_hdl_code">initial	write_timeout = 0;</span></span>
<span class="line" line-num="285" source-line-num="285">		<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="286" source-line-num="286">		<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="287" source-line-num="287">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="288" source-line-num="288">			<span class="tlv_ident_hdl_code">write_timer &lt;= OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="289" source-line-num="289">			<span class="tlv_ident_hdl_code">write_timeout&lt;= 1'b0;</span></span>
<span class="line" line-num="290" source-line-num="290">		<span class="tlv_ident_hdl_code">end else if (!awskd_valid || !wfifo_full || !wskd_valid</span></span>
<span class="line" line-num="291" source-line-num="291">				<span class="tlv_ident_hdl_code">|| (awskd_addr[1] != ADDR_SOURCE[1])</span></span>
<span class="line" line-num="292" source-line-num="292">				<span class="tlv_ident_hdl_code">|| (S_AXI_BVALID &amp;&amp; !S_AXI_BREADY))</span></span>
<span class="line" line-num="293" source-line-num="293">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="294" source-line-num="294">			<span class="tlv_ident_hdl_code">write_timer &lt;= OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="295" source-line-num="295">			<span class="tlv_ident_hdl_code">write_timeout&lt;= 1'b0;</span></span>
<span class="line" line-num="296" source-line-num="296">		<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="297" source-line-num="297">			<span class="tlv_ident_hdl_code">if (write_timer &gt; 0)</span></span>
<span class="line" line-num="298" source-line-num="298">				<span class="tlv_ident_hdl_code">write_timer &lt;= write_timer - 1;</span></span>
<span class="line" line-num="299" source-line-num="299">			<span class="tlv_ident_hdl_code">write_timeout &lt;= (write_timer &lt;= 1);</span></span>
<span class="line" line-num="300" source-line-num="300">		<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="301" source-line-num="301"></span>
<span class="line" line-num="302" source-line-num="302"><span class="tlv_ident_hdl_code">`ifdef	FORMAL</span></span>
<span class="line" line-num="303" source-line-num="303">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="304" source-line-num="304">			<span class="tlv_ident_hdl_code">assert(write_timer &lt;= OPT_TIMEOUT-1);</span></span>
<span class="line" line-num="305" source-line-num="305">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="306" source-line-num="306">			<span class="tlv_ident_hdl_code">assert(write_timeout == (write_timer == 0));</span></span>
<span class="line" line-num="307" source-line-num="307"><span class="tlv_ident_hdl_code">`endif</span></span>
<span class="line" line-num="308" source-line-num="308">	<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="309" source-line-num="309"></span>
<span class="line" line-num="310" source-line-num="310">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="311" source-line-num="311">			<span class="tlv_ident_hdl_code">write_timeout&lt;= 1'b1;</span></span>
<span class="line" line-num="312" source-line-num="312"></span>
<span class="line" line-num="313" source-line-num="313">	<span class="tlv_ident_hdl_code">end endgenerate</span></span>
<span class="line" line-num="314" source-line-num="314">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="315" source-line-num="315">	</span>
<span class="line" line-num="316" source-line-num="316"></span>
<span class="line" line-num="317" source-line-num="317">	<span class="tlv_ident_hdl_code">initial	axil_bvalid = 0;</span></span>
<span class="line" line-num="318" source-line-num="318">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="319" source-line-num="319">	<span class="tlv_ident_hdl_code">if (i_reset)</span></span>
<span class="line" line-num="320" source-line-num="320">		<span class="tlv_ident_hdl_code">axil_bvalid &lt;= 0;</span></span>
<span class="line" line-num="321" source-line-num="321">	<span class="tlv_ident_hdl_code">else if (axil_write_ready)</span></span>
<span class="line" line-num="322" source-line-num="322">		<span class="tlv_ident_hdl_code">axil_bvalid &lt;= 1;</span></span>
<span class="line" line-num="323" source-line-num="323">	<span class="tlv_ident_hdl_code">else if (S_AXI_BREADY)</span></span>
<span class="line" line-num="324" source-line-num="324">		<span class="tlv_ident_hdl_code">axil_bvalid &lt;= 0;</span></span>
<span class="line" line-num="325" source-line-num="325"></span>
<span class="line" line-num="326" source-line-num="326">	<span class="tlv_ident_hdl_code">assign	S_AXI_BVALID = axil_bvalid;</span></span>
<span class="line" line-num="327" source-line-num="327"></span>
<span class="line" line-num="328" source-line-num="328">	<span class="tlv_ident_hdl_code">initial	axil_berr = 0;</span></span>
<span class="line" line-num="329" source-line-num="329">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="330" source-line-num="330">	<span class="tlv_ident_hdl_code">if (OPT_LOWPOWER &amp;&amp; i_reset)</span></span>
<span class="line" line-num="331" source-line-num="331">		<span class="tlv_ident_hdl_code">axil_berr &lt;= 0;</span></span>
<span class="line" line-num="332" source-line-num="332">	<span class="tlv_ident_hdl_code">else if (axil_write_ready)</span></span>
<span class="line" line-num="333" source-line-num="333">		<span class="tlv_ident_hdl_code">axil_berr &lt;= (wfifo_full)&amp;&amp;(awskd_addr[1]==ADDR_SOURCE[1]);</span></span>
<span class="line" line-num="334" source-line-num="334">	<span class="tlv_ident_hdl_code">else if (OPT_LOWPOWER &amp;&amp; S_AXI_BREADY)</span></span>
<span class="line" line-num="335" source-line-num="335">		<span class="tlv_ident_hdl_code">axil_berr &lt;= 1'b0;</span></span>
<span class="line" line-num="336" source-line-num="336"></span>
<span class="line" line-num="337" source-line-num="337">	<span class="tlv_ident_hdl_code">assign	S_AXI_BRESP = { axil_berr, 1'b0 };</span></span>
<span class="line" line-num="338" source-line-num="338">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="339" source-line-num="339"></span>
<span class="line" line-num="340" source-line-num="340">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="341" source-line-num="341">	<span class="tlv_ident_comment">// AXI-stream source (Write) FIFO</span></span>
<span class="line" line-num="342" source-line-num="342">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="343" source-line-num="343">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="344" source-line-num="344">	<span class="tlv_ident_hdl_code">assign	wfifo_write = axil_write_ready &amp;&amp; awskd_addr[1]==ADDR_SOURCE[1]</span></span>
<span class="line" line-num="345" source-line-num="345">			<span class="tlv_ident_hdl_code">&amp;&amp; wskd_strb != 0 &amp;&amp; !wfifo_full;</span></span>
<span class="line" line-num="346" source-line-num="346"></span>
<span class="line" line-num="347" source-line-num="347">	<span class="tlv_ident_hdl_code">generate if (OPT_SOURCE)</span></span>
<span class="line" line-num="348" source-line-num="348">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="349" source-line-num="349"></span>
<span class="line" line-num="350" source-line-num="350">		<span class="tlv_ident_hdl_code">sfifo #(.BW(SW+1), .LGFLEN(LGFIFO))</span></span>
<span class="line" line-num="351" source-line-num="351">		<span class="tlv_ident_hdl_code">source(.i_clk(S_AXI_ACLK), .i_reset(!S_AXI_ARESETN),</span></span>
<span class="line" line-num="352" source-line-num="352">			<span class="tlv_ident_hdl_code">.i_wr(wfifo_write),</span></span>
<span class="line" line-num="353" source-line-num="353">			<span class="tlv_ident_hdl_code">.i_data({awskd_addr[0]==ADDR_SOURCE[0],</span></span>
<span class="line" line-num="354" source-line-num="354">					<span class="tlv_ident_hdl_code">wskd_data[SW-1:0]}),</span></span>
<span class="line" line-num="355" source-line-num="355">			<span class="tlv_ident_hdl_code">.o_full(wfifo_full), .o_fill(wfifo_fill),</span></span>
<span class="line" line-num="356" source-line-num="356">			<span class="tlv_ident_hdl_code">.i_rd(M_AXIS_TREADY),</span></span>
<span class="line" line-num="357" source-line-num="357">				<span class="tlv_ident_hdl_code">.o_data({ M_AXIS_TLAST, M_AXIS_TDATA }),</span></span>
<span class="line" line-num="358" source-line-num="358">				<span class="tlv_ident_hdl_code">.o_empty(wfifo_empty));</span></span>
<span class="line" line-num="359" source-line-num="359"></span>
<span class="line" line-num="360" source-line-num="360">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="361" source-line-num="361">			<span class="tlv_ident_hdl_code">M_AXIS_TVALID = !wfifo_empty;</span></span>
<span class="line" line-num="362" source-line-num="362"></span>
<span class="line" line-num="363" source-line-num="363">	<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="364" source-line-num="364"></span>
<span class="line" line-num="365" source-line-num="365">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="366" source-line-num="366">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="367" source-line-num="367">			<span class="tlv_ident_hdl_code">M_AXIS_TVALID = 1'b0;</span></span>
<span class="line" line-num="368" source-line-num="368">			<span class="tlv_ident_hdl_code">M_AXIS_TDATA  = 0;</span></span>
<span class="line" line-num="369" source-line-num="369">			<span class="tlv_ident_hdl_code">M_AXIS_TLAST  = 0;</span></span>
<span class="line" line-num="370" source-line-num="370">		<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="371" source-line-num="371"></span>
<span class="line" line-num="372" source-line-num="372">		<span class="tlv_ident_hdl_code">assign	wfifo_full = 1'b0;</span></span>
<span class="line" line-num="373" source-line-num="373">		<span class="tlv_ident_hdl_code">assign	wfifo_fill = 0;</span></span>
<span class="line" line-num="374" source-line-num="374"></span>
<span class="line" line-num="375" source-line-num="375">	<span class="tlv_ident_hdl_code">end endgenerate</span></span>
<span class="line" line-num="376" source-line-num="376">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="377" source-line-num="377"></span>
<span class="line" line-num="378" source-line-num="378">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="379" source-line-num="379">	<span class="tlv_ident_comment">// AXI-stream consumer/sink (Read) FIFO</span></span>
<span class="line" line-num="380" source-line-num="380">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="381" source-line-num="381">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="382" source-line-num="382">	<span class="tlv_ident_hdl_code">wire			rfifo_empty, rfifo_full, rfifo_last, read_rfifo;</span></span>
<span class="line" line-num="383" source-line-num="383">	<span class="tlv_ident_hdl_code">wire	[LGFIFO:0]	rfifo_fill;</span></span>
<span class="line" line-num="384" source-line-num="384">	<span class="tlv_ident_hdl_code">wire	[SW-1:0]	rfifo_data;</span></span>
<span class="line" line-num="385" source-line-num="385"></span>
<span class="line" line-num="386" source-line-num="386">	<span class="tlv_ident_hdl_code">generate if (OPT_SINK)</span></span>
<span class="line" line-num="387" source-line-num="387">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="388" source-line-num="388"></span>
<span class="line" line-num="389" source-line-num="389">		<span class="tlv_ident_hdl_code">sfifo #(.BW(SW+1), .LGFLEN(LGFIFO))</span></span>
<span class="line" line-num="390" source-line-num="390">		<span class="tlv_ident_hdl_code">sink(.i_clk(S_AXI_ACLK), .i_reset(!S_AXI_ARESETN),</span></span>
<span class="line" line-num="391" source-line-num="391">			<span class="tlv_ident_hdl_code">.i_wr(S_AXIS_TVALID &amp;&amp; S_AXIS_TREADY),</span></span>
<span class="line" line-num="392" source-line-num="392">			<span class="tlv_ident_hdl_code">.i_data({S_AXIS_TLAST, S_AXIS_TDATA}),</span></span>
<span class="line" line-num="393" source-line-num="393">			<span class="tlv_ident_hdl_code">.o_full(rfifo_full), .o_fill(rfifo_fill),</span></span>
<span class="line" line-num="394" source-line-num="394">			<span class="tlv_ident_hdl_code">.i_rd(read_rfifo),</span></span>
<span class="line" line-num="395" source-line-num="395">				<span class="tlv_ident_hdl_code">.o_data({ rfifo_last, rfifo_data }),</span></span>
<span class="line" line-num="396" source-line-num="396">				<span class="tlv_ident_hdl_code">.o_empty(rfifo_empty));</span></span>
<span class="line" line-num="397" source-line-num="397"></span>
<span class="line" line-num="398" source-line-num="398">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="399" source-line-num="399">			<span class="tlv_ident_hdl_code">S_AXIS_TREADY = !rfifo_full;</span></span>
<span class="line" line-num="400" source-line-num="400">		<span class="tlv_ident_hdl_code">assign	read_rfifo =(axil_read_ready &amp;&amp; arskd_addr== ADDR_SINK)</span></span>
<span class="line" line-num="401" source-line-num="401">				<span class="tlv_ident_hdl_code">&amp;&amp; !rfifo_empty;</span></span>
<span class="line" line-num="402" source-line-num="402"></span>
<span class="line" line-num="403" source-line-num="403">	<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="404" source-line-num="404"></span>
<span class="line" line-num="405" source-line-num="405">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="406" source-line-num="406">			<span class="tlv_ident_hdl_code">S_AXIS_TREADY = 1'b1;</span></span>
<span class="line" line-num="407" source-line-num="407"></span>
<span class="line" line-num="408" source-line-num="408">		<span class="tlv_ident_hdl_code">assign rfifo_empty = 1'b1;</span></span>
<span class="line" line-num="409" source-line-num="409">		<span class="tlv_ident_hdl_code">assign rfifo_data  = 0;</span></span>
<span class="line" line-num="410" source-line-num="410">		<span class="tlv_ident_hdl_code">assign rfifo_last  = 1'b1;</span></span>
<span class="line" line-num="411" source-line-num="411">		<span class="tlv_ident_hdl_code">assign rfifo_fill  = 0;</span></span>
<span class="line" line-num="412" source-line-num="412"></span>
<span class="line" line-num="413" source-line-num="413">	<span class="tlv_ident_hdl_code">end endgenerate</span></span>
<span class="line" line-num="414" source-line-num="414">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="415" source-line-num="415"></span>
<span class="line" line-num="416" source-line-num="416">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="417" source-line-num="417">	<span class="tlv_ident_comment">// Read timeout generation</span></span>
<span class="line" line-num="418" source-line-num="418">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="419" source-line-num="419">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="420" source-line-num="420">	<span class="tlv_ident_hdl_code">generate if (OPT_SINK &amp;&amp; OPT_TIMEOUT &gt; 1)</span></span>
<span class="line" line-num="421" source-line-num="421">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="422" source-line-num="422">		<span class="tlv_ident_hdl_code">reg [$clog2(OPT_TIMEOUT)-1:0] read_timer;</span></span>
<span class="line" line-num="423" source-line-num="423"></span>
<span class="line" line-num="424" source-line-num="424">		<span class="tlv_ident_hdl_code">initial	read_timer = OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="425" source-line-num="425">		<span class="tlv_ident_hdl_code">initial	read_timeout = 1'b0;</span></span>
<span class="line" line-num="426" source-line-num="426">		<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="427" source-line-num="427">		<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="428" source-line-num="428">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="429" source-line-num="429">			<span class="tlv_ident_hdl_code">read_timer &lt;= OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="430" source-line-num="430">			<span class="tlv_ident_hdl_code">read_timeout&lt;= 1'b0;</span></span>
<span class="line" line-num="431" source-line-num="431">		<span class="tlv_ident_hdl_code">end else if (!arskd_valid || (S_AXI_RVALID &amp;&amp; !S_AXI_RREADY)</span></span>
<span class="line" line-num="432" source-line-num="432">				<span class="tlv_ident_hdl_code">||!rfifo_empty</span></span>
<span class="line" line-num="433" source-line-num="433">				<span class="tlv_ident_hdl_code">||(arskd_addr[1] != ADDR_SINK[1]))</span></span>
<span class="line" line-num="434" source-line-num="434">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="435" source-line-num="435">			<span class="tlv_ident_hdl_code">read_timer &lt;= OPT_TIMEOUT-1;</span></span>
<span class="line" line-num="436" source-line-num="436">			<span class="tlv_ident_hdl_code">read_timeout&lt;= 1'b0;</span></span>
<span class="line" line-num="437" source-line-num="437">		<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="438" source-line-num="438">			<span class="tlv_ident_hdl_code">if (read_timer &gt; 0)</span></span>
<span class="line" line-num="439" source-line-num="439">				<span class="tlv_ident_hdl_code">read_timer &lt;= read_timer - 1;</span></span>
<span class="line" line-num="440" source-line-num="440">			<span class="tlv_ident_hdl_code">read_timeout &lt;= (read_timer &lt;= 1);</span></span>
<span class="line" line-num="441" source-line-num="441">		<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="442" source-line-num="442"></span>
<span class="line" line-num="443" source-line-num="443"><span class="tlv_ident_hdl_code">`ifdef	FORMAL</span></span>
<span class="line" line-num="444" source-line-num="444">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="445" source-line-num="445">			<span class="tlv_ident_hdl_code">assert(read_timer &lt;= OPT_TIMEOUT-1);</span></span>
<span class="line" line-num="446" source-line-num="446">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="447" source-line-num="447">			<span class="tlv_ident_hdl_code">assert(read_timeout == (read_timer == 0));</span></span>
<span class="line" line-num="448" source-line-num="448"><span class="tlv_ident_hdl_code">`endif</span></span>
<span class="line" line-num="449" source-line-num="449">	<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="450" source-line-num="450"></span>
<span class="line" line-num="451" source-line-num="451">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="452" source-line-num="452">			<span class="tlv_ident_hdl_code">read_timeout = 1'b1;</span></span>
<span class="line" line-num="453" source-line-num="453"></span>
<span class="line" line-num="454" source-line-num="454">	<span class="tlv_ident_hdl_code">end endgenerate</span></span>
<span class="line" line-num="455" source-line-num="455">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="456" source-line-num="456"></span>
<span class="line" line-num="457" source-line-num="457">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="458" source-line-num="458">	<span class="tlv_ident_comment">// Read signaling</span></span>
<span class="line" line-num="459" source-line-num="459">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="460" source-line-num="460">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="461" source-line-num="461">	<span class="tlv_ident_hdl_code">wire	arskd_valid;</span></span>
<span class="line" line-num="462" source-line-num="462"></span>
<span class="line" line-num="463" source-line-num="463">	<span class="tlv_ident_hdl_code">skidbuffer #(.OPT_OUTREG(0),</span></span>
<span class="line" line-num="464" source-line-num="464">			<span class="tlv_ident_hdl_code">.OPT_LOWPOWER(OPT_LOWPOWER),</span></span>
<span class="line" line-num="465" source-line-num="465">			<span class="tlv_ident_hdl_code">.DW(C_AXI_ADDR_WIDTH-ADDRLSB))</span></span>
<span class="line" line-num="466" source-line-num="466">	<span class="tlv_ident_hdl_code">axilarskid(</span><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="467" source-line-num="467">		<span class="tlv_ident_hdl_code">.i_clk(S_AXI_ACLK), .i_reset(i_reset),</span></span>
<span class="line" line-num="468" source-line-num="468">		<span class="tlv_ident_hdl_code">.i_valid(S_AXI_ARVALID), .o_ready(S_AXI_ARREADY),</span></span>
<span class="line" line-num="469" source-line-num="469">		<span class="tlv_ident_hdl_code">.i_data(S_AXI_ARADDR[C_AXI_ADDR_WIDTH-1:ADDRLSB]),</span></span>
<span class="line" line-num="470" source-line-num="470">		<span class="tlv_ident_hdl_code">.o_valid(arskd_valid), .i_ready(axil_read_ready),</span></span>
<span class="line" line-num="471" source-line-num="471">		<span class="tlv_ident_hdl_code">.o_data(arskd_addr));</span></span>
<span class="line" line-num="472" source-line-num="472"></span>
<span class="line" line-num="473" source-line-num="473">	<span class="tlv_ident_hdl_code">assign	axil_read_ready = arskd_valid</span></span>
<span class="line" line-num="474" source-line-num="474">			<span class="tlv_ident_hdl_code">&amp;&amp; (!S_AXI_RVALID || S_AXI_RREADY)</span></span>
<span class="line" line-num="475" source-line-num="475">			<span class="tlv_ident_hdl_code">&amp;&amp; ((arskd_addr[1] != ADDR_SINK[1])</span></span>
<span class="line" line-num="476" source-line-num="476">				<span class="tlv_ident_hdl_code">|| (!rfifo_empty || read_timeout));</span></span>
<span class="line" line-num="477" source-line-num="477"></span>
<span class="line" line-num="478" source-line-num="478">	<span class="tlv_ident_hdl_code">initial	axil_read_valid = 1'b0;</span></span>
<span class="line" line-num="479" source-line-num="479">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="480" source-line-num="480">	<span class="tlv_ident_hdl_code">if (i_reset)</span></span>
<span class="line" line-num="481" source-line-num="481">		<span class="tlv_ident_hdl_code">axil_read_valid &lt;= 1'b0;</span></span>
<span class="line" line-num="482" source-line-num="482">	<span class="tlv_ident_hdl_code">else if (axil_read_ready)</span></span>
<span class="line" line-num="483" source-line-num="483">		<span class="tlv_ident_hdl_code">axil_read_valid &lt;= 1'b1;</span></span>
<span class="line" line-num="484" source-line-num="484">	<span class="tlv_ident_hdl_code">else if (S_AXI_RREADY)</span></span>
<span class="line" line-num="485" source-line-num="485">		<span class="tlv_ident_hdl_code">axil_read_valid &lt;= 1'b0;</span></span>
<span class="line" line-num="486" source-line-num="486"></span>
<span class="line" line-num="487" source-line-num="487">	<span class="tlv_ident_hdl_code">assign	S_AXI_RVALID = axil_read_valid;</span></span>
<span class="line" line-num="488" source-line-num="488"></span>
<span class="line" line-num="489" source-line-num="489">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="490" source-line-num="490">	<span class="tlv_ident_hdl_code">if (OPT_LOWPOWER &amp;&amp; !S_AXI_ARESETN)</span></span>
<span class="line" line-num="491" source-line-num="491">		<span class="tlv_ident_hdl_code">axil_rerr &lt;= 1'b0;</span></span>
<span class="line" line-num="492" source-line-num="492">	<span class="tlv_ident_hdl_code">else if (axil_read_ready)</span></span>
<span class="line" line-num="493" source-line-num="493">		<span class="tlv_ident_hdl_code">axil_rerr &lt;= rfifo_empty &amp;&amp; (arskd_addr[1] == ADDR_SINK[1]);</span></span>
<span class="line" line-num="494" source-line-num="494">	<span class="tlv_ident_hdl_code">else if (OPT_LOWPOWER &amp;&amp; S_AXI_RREADY)</span></span>
<span class="line" line-num="495" source-line-num="495">		<span class="tlv_ident_hdl_code">axil_rerr &lt;= 1'b0;</span></span>
<span class="line" line-num="496" source-line-num="496"></span>
<span class="line" line-num="497" source-line-num="497">	<span class="tlv_ident_hdl_code">assign	S_AXI_RRESP = { axil_rerr, 1'b0 };</span></span>
<span class="line" line-num="498" source-line-num="498">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="499" source-line-num="499"></span>
<span class="line" line-num="500" source-line-num="500">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="501" source-line-num="501">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="502" source-line-num="502">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="503" source-line-num="503">	<span class="tlv_ident_comment">// AXI-lite register logic</span></span>
<span class="line" line-num="504" source-line-num="504">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="505" source-line-num="505">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="506" source-line-num="506">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="507" source-line-num="507">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="508" source-line-num="508"></span>
<span class="line" line-num="509" source-line-num="509"></span>
<span class="line" line-num="510" source-line-num="510">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="511" source-line-num="511">	<span class="tlv_ident_comment">// Read data counting</span></span>
<span class="line" line-num="512" source-line-num="512">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="513" source-line-num="513">	<span class="tlv_ident_hdl_code">initial	reads_completed = 0;</span></span>
<span class="line" line-num="514" source-line-num="514">	<span class="tlv_ident_hdl_code">initial	read_bursts_completed = 0;</span></span>
<span class="line" line-num="515" source-line-num="515">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="516" source-line-num="516">	<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="517" source-line-num="517">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="518" source-line-num="518">		<span class="tlv_ident_hdl_code">reads_completed &lt;= 0;</span></span>
<span class="line" line-num="519" source-line-num="519">		<span class="tlv_ident_hdl_code">read_bursts_completed &lt;= 0;</span></span>
<span class="line" line-num="520" source-line-num="520">	<span class="tlv_ident_hdl_code">end else if (!OPT_SINK)</span></span>
<span class="line" line-num="521" source-line-num="521">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="522" source-line-num="522">		<span class="tlv_ident_hdl_code">reads_completed &lt;= reads_completed + (S_AXIS_TVALID ? 1:0);</span></span>
<span class="line" line-num="523" source-line-num="523">		<span class="tlv_ident_hdl_code">read_bursts_completed &lt;= read_bursts_completed</span></span>
<span class="line" line-num="524" source-line-num="524">				<span class="tlv_ident_hdl_code">+ ((S_AXIS_TVALID &amp;&amp; S_AXIS_TLAST) ? 1:0);</span></span>
<span class="line" line-num="525" source-line-num="525">	<span class="tlv_ident_hdl_code">end else if (read_rfifo &amp;&amp; !rfifo_empty)</span></span>
<span class="line" line-num="526" source-line-num="526">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="527" source-line-num="527">		<span class="tlv_ident_hdl_code">reads_completed &lt;= reads_completed + 1;</span></span>
<span class="line" line-num="528" source-line-num="528">		<span class="tlv_ident_hdl_code">read_bursts_completed &lt;= read_bursts_completed + (rfifo_last ? 1:0);</span></span>
<span class="line" line-num="529" source-line-num="529">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="530" source-line-num="530">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="531" source-line-num="531"></span>
<span class="line" line-num="532" source-line-num="532">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="533" source-line-num="533">	<span class="tlv_ident_comment">// Write data counting</span></span>
<span class="line" line-num="534" source-line-num="534">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="535" source-line-num="535">	<span class="tlv_ident_hdl_code">generate if (OPT_SOURCE)</span></span>
<span class="line" line-num="536" source-line-num="536">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="537" source-line-num="537"></span>
<span class="line" line-num="538" source-line-num="538">		<span class="tlv_ident_hdl_code">initial	writes_completed = 0;</span></span>
<span class="line" line-num="539" source-line-num="539">		<span class="tlv_ident_hdl_code">initial	write_bursts_completed = 0;</span></span>
<span class="line" line-num="540" source-line-num="540">		<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="541" source-line-num="541">		<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="542" source-line-num="542">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="543" source-line-num="543">			<span class="tlv_ident_hdl_code">writes_completed &lt;= 0;</span></span>
<span class="line" line-num="544" source-line-num="544">			<span class="tlv_ident_hdl_code">write_bursts_completed &lt;= 0;</span></span>
<span class="line" line-num="545" source-line-num="545">		<span class="tlv_ident_hdl_code">end else if (M_AXIS_TVALID &amp;&amp; M_AXIS_TREADY)</span></span>
<span class="line" line-num="546" source-line-num="546">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="547" source-line-num="547">			<span class="tlv_ident_hdl_code">writes_completed &lt;= writes_completed + 1;</span></span>
<span class="line" line-num="548" source-line-num="548">			<span class="tlv_ident_hdl_code">write_bursts_completed &lt;= write_bursts_completed</span></span>
<span class="line" line-num="549" source-line-num="549">					<span class="tlv_ident_hdl_code">+ (M_AXIS_TLAST ? 1:0);</span></span>
<span class="line" line-num="550" source-line-num="550">		<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="551" source-line-num="551"></span>
<span class="line" line-num="552" source-line-num="552">	<span class="tlv_ident_hdl_code">end else begin</span></span>
<span class="line" line-num="553" source-line-num="553"></span>
<span class="line" line-num="554" source-line-num="554">		<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="555" source-line-num="555">		<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="556" source-line-num="556">			<span class="tlv_ident_hdl_code">writes_completed = 0;</span></span>
<span class="line" line-num="557" source-line-num="557">			<span class="tlv_ident_hdl_code">write_bursts_completed = 0;</span></span>
<span class="line" line-num="558" source-line-num="558">		<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="559" source-line-num="559"></span>
<span class="line" line-num="560" source-line-num="560">	<span class="tlv_ident_hdl_code">end endgenerate</span></span>
<span class="line" line-num="561" source-line-num="561">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="562" source-line-num="562"></span>
<span class="line" line-num="563" source-line-num="563">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="564" source-line-num="564">	<span class="tlv_ident_comment">// Read data register</span></span>
<span class="line" line-num="565" source-line-num="565">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="566" source-line-num="566">	<span class="tlv_ident_hdl_code">initial	axil_read_data = 0;</span></span>
<span class="line" line-num="567" source-line-num="567">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="568" source-line-num="568">	<span class="tlv_ident_hdl_code">if (OPT_LOWPOWER &amp;&amp; !S_AXI_ARESETN)</span></span>
<span class="line" line-num="569" source-line-num="569">		<span class="tlv_ident_hdl_code">axil_read_data &lt;= 0;</span></span>
<span class="line" line-num="570" source-line-num="570">	<span class="tlv_ident_hdl_code">else if (!S_AXI_RVALID || S_AXI_RREADY)</span></span>
<span class="line" line-num="571" source-line-num="571">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="572" source-line-num="572">		<span class="tlv_ident_hdl_code">axil_read_data &lt;= 0;</span></span>
<span class="line" line-num="573" source-line-num="573">		<span class="tlv_ident_hdl_code">casez(arskd_addr)</span></span>
<span class="line" line-num="574" source-line-num="574">		<span class="tlv_ident_hdl_code">{ ADDR_SINK[1], 1'b? }:	begin</span></span>
<span class="line" line-num="575" source-line-num="575">			<span class="tlv_ident_hdl_code">if (OPT_SIGN_EXTEND &amp;&amp; rfifo_data[SW-1])</span></span>
<span class="line" line-num="576" source-line-num="576">				<span class="tlv_ident_hdl_code">axil_read_data &lt;= -1;</span></span>
<span class="line" line-num="577" source-line-num="577">			<span class="tlv_ident_hdl_code">axil_read_data[SW-1:0] &lt;= rfifo_data;</span></span>
<span class="line" line-num="578" source-line-num="578">			<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="579" source-line-num="579">		<span class="tlv_ident_hdl_code">ADDR_STATS: begin</span></span>
<span class="line" line-num="580" source-line-num="580">			<span class="tlv_ident_hdl_code">axil_read_data[31:28] &lt;= write_bursts_completed;</span></span>
<span class="line" line-num="581" source-line-num="581">			<span class="tlv_ident_hdl_code">axil_read_data[27:16] &lt;= writes_completed;</span></span>
<span class="line" line-num="582" source-line-num="582">			<span class="tlv_ident_hdl_code">axil_read_data[15:12] &lt;= read_bursts_completed;</span></span>
<span class="line" line-num="583" source-line-num="583">			<span class="tlv_ident_hdl_code">axil_read_data[11:0]  &lt;= reads_completed;</span></span>
<span class="line" line-num="584" source-line-num="584">			<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="585" source-line-num="585">		<span class="tlv_ident_hdl_code">ADDR_FIFO:	begin</span></span>
<span class="line" line-num="586" source-line-num="586">			<span class="tlv_ident_comment">// FIFO information</span></span>
<span class="line" line-num="587" source-line-num="587">			<span class="tlv_ident_hdl_code">axil_read_data[16 +: LGFIFO+1] &lt;= wfifo_fill;</span></span>
<span class="line" line-num="588" source-line-num="588">			<span class="tlv_ident_hdl_code">axil_read_data[15] &lt;= rfifo_last;</span></span>
<span class="line" line-num="589" source-line-num="589">			<span class="tlv_ident_hdl_code">axil_read_data[LGFIFO:0] &lt;= rfifo_fill;</span></span>
<span class="line" line-num="590" source-line-num="590">			<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="591" source-line-num="591">		<span class="tlv_ident_hdl_code">endcase</span></span>
<span class="line" line-num="592" source-line-num="592"></span>
<span class="line" line-num="593" source-line-num="593">		<span class="tlv_ident_hdl_code">if (OPT_LOWPOWER &amp;&amp; !axil_read_ready)</span></span>
<span class="line" line-num="594" source-line-num="594">			<span class="tlv_ident_hdl_code">axil_read_data &lt;= 0;</span></span>
<span class="line" line-num="595" source-line-num="595">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="596" source-line-num="596"></span>
<span class="line" line-num="597" source-line-num="597">	<span class="tlv_ident_hdl_code">assign	S_AXI_RDATA  = axil_read_data;</span></span>
<span class="line" line-num="598" source-line-num="598">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="599" source-line-num="599"></span>
<span class="line" line-num="600" source-line-num="600">	<span class="tlv_ident_comment">// Verilator lint_off UNUSED</span></span>
<span class="line" line-num="601" source-line-num="601">	<span class="tlv_ident_hdl_code">wire	unused;</span></span>
<span class="line" line-num="602" source-line-num="602">	<span class="tlv_ident_hdl_code">assign	unused = &amp;{ 1'b0, S_AXI_AWPROT, S_AXI_ARPROT,</span></span>
<span class="line" line-num="603" source-line-num="603">			<span class="tlv_ident_hdl_code">S_AXI_ARADDR[ADDRLSB-1:0],</span></span>
<span class="line" line-num="604" source-line-num="604">			<span class="tlv_ident_hdl_code">S_AXI_AWADDR[ADDRLSB-1:0],</span></span>
<span class="line" line-num="605" source-line-num="605">			<span class="tlv_ident_hdl_code">wskd_data[C_AXI_DATA_WIDTH-1:SW] };</span></span>
<span class="line" line-num="606" source-line-num="606">	<span class="tlv_ident_comment">// Verilator lint_on  UNUSED</span></span>
<span class="line" line-num="607" source-line-num="607">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="608" source-line-num="608"><span class="tlv_ident_hdl_code">`ifdef	FORMAL</span></span>
<span class="line" line-num="609" source-line-num="609">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="610" source-line-num="610">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="611" source-line-num="611">	<span class="tlv_ident_comment">// Formal properties used in verfiying this core</span></span>
<span class="line" line-num="612" source-line-num="612">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="613" source-line-num="613">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="614" source-line-num="614">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="615" source-line-num="615">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="616" source-line-num="616">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="617" source-line-num="617">	<span class="tlv_ident_hdl_code">reg	f_past_valid;</span></span>
<span class="line" line-num="618" source-line-num="618">	<span class="tlv_ident_hdl_code">initial	f_past_valid = 0;</span></span>
<span class="line" line-num="619" source-line-num="619">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="620" source-line-num="620">		<span class="tlv_ident_hdl_code">f_past_valid &lt;= 1;</span></span>
<span class="line" line-num="621" source-line-num="621"></span>
<span class="line" line-num="622" source-line-num="622">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="623" source-line-num="623">	<span class="tlv_ident_hdl_code">if (!f_past_valid)</span></span>
<span class="line" line-num="624" source-line-num="624">		<span class="tlv_ident_hdl_code">assume(!S_AXI_ARESETN);</span></span>
<span class="line" line-num="625" source-line-num="625">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="626" source-line-num="626">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="627" source-line-num="627">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="628" source-line-num="628">	<span class="tlv_ident_comment">// The AXI-lite control interface</span></span>
<span class="line" line-num="629" source-line-num="629">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="630" source-line-num="630">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="631" source-line-num="631">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="632" source-line-num="632">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="633" source-line-num="633">	<span class="tlv_ident_hdl_code">localparam	F_AXIL_LGDEPTH = 4;</span></span>
<span class="line" line-num="634" source-line-num="634">	<span class="tlv_ident_hdl_code">wire	[F_AXIL_LGDEPTH-1:0]	faxil_rd_outstanding,</span></span>
<span class="line" line-num="635" source-line-num="635">					<span class="tlv_ident_hdl_code">faxil_wr_outstanding,</span></span>
<span class="line" line-num="636" source-line-num="636">					<span class="tlv_ident_hdl_code">faxil_awr_outstanding;</span></span>
<span class="line" line-num="637" source-line-num="637"></span>
<span class="line" line-num="638" source-line-num="638">	<span class="tlv_ident_hdl_code">faxil_slave #(</span></span>
<span class="line" line-num="639" source-line-num="639">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="640" source-line-num="640">		<span class="tlv_ident_hdl_code">.C_AXI_DATA_WIDTH(C_AXI_DATA_WIDTH),</span></span>
<span class="line" line-num="641" source-line-num="641">		<span class="tlv_ident_hdl_code">.C_AXI_ADDR_WIDTH(C_AXI_ADDR_WIDTH),</span></span>
<span class="line" line-num="642" source-line-num="642">		<span class="tlv_ident_hdl_code">.F_LGDEPTH(F_AXIL_LGDEPTH),</span></span>
<span class="line" line-num="643" source-line-num="643">		<span class="tlv_ident_hdl_code">.F_AXI_MAXWAIT(OPT_TIMEOUT + 2),</span></span>
<span class="line" line-num="644" source-line-num="644">		<span class="tlv_ident_hdl_code">.F_AXI_MAXDELAY(OPT_TIMEOUT + 2),</span></span>
<span class="line" line-num="645" source-line-num="645">		<span class="tlv_ident_hdl_code">.F_AXI_MAXRSTALL(2),</span></span>
<span class="line" line-num="646" source-line-num="646">		<span class="tlv_ident_hdl_code">.F_OPT_COVER_BURST(4)</span></span>
<span class="line" line-num="647" source-line-num="647">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="648" source-line-num="648">	<span class="tlv_ident_hdl_code">) faxil(</span></span>
<span class="line" line-num="649" source-line-num="649">		<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="650" source-line-num="650">		<span class="tlv_ident_hdl_code">.i_clk(S_AXI_ACLK), .i_axi_reset_n(S_AXI_ARESETN),</span></span>
<span class="line" line-num="651" source-line-num="651">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="652" source-line-num="652">		<span class="tlv_ident_hdl_code">.i_axi_awvalid(S_AXI_AWVALID),</span></span>
<span class="line" line-num="653" source-line-num="653">		<span class="tlv_ident_hdl_code">.i_axi_awready(S_AXI_AWREADY),</span></span>
<span class="line" line-num="654" source-line-num="654">		<span class="tlv_ident_hdl_code">.i_axi_awaddr( S_AXI_AWADDR),</span></span>
<span class="line" line-num="655" source-line-num="655">		<span class="tlv_ident_hdl_code">.i_axi_awcache(4'h0),</span></span>
<span class="line" line-num="656" source-line-num="656">		<span class="tlv_ident_hdl_code">.i_axi_awprot( S_AXI_AWPROT),</span></span>
<span class="line" line-num="657" source-line-num="657">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="658" source-line-num="658">		<span class="tlv_ident_hdl_code">.i_axi_wvalid(S_AXI_WVALID),</span></span>
<span class="line" line-num="659" source-line-num="659">		<span class="tlv_ident_hdl_code">.i_axi_wready(S_AXI_WREADY),</span></span>
<span class="line" line-num="660" source-line-num="660">		<span class="tlv_ident_hdl_code">.i_axi_wdata( S_AXI_WDATA),</span></span>
<span class="line" line-num="661" source-line-num="661">		<span class="tlv_ident_hdl_code">.i_axi_wstrb( S_AXI_WSTRB),</span></span>
<span class="line" line-num="662" source-line-num="662">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="663" source-line-num="663">		<span class="tlv_ident_hdl_code">.i_axi_bvalid(S_AXI_BVALID),</span></span>
<span class="line" line-num="664" source-line-num="664">		<span class="tlv_ident_hdl_code">.i_axi_bready(S_AXI_BREADY),</span></span>
<span class="line" line-num="665" source-line-num="665">		<span class="tlv_ident_hdl_code">.i_axi_bresp( S_AXI_BRESP),</span></span>
<span class="line" line-num="666" source-line-num="666">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="667" source-line-num="667">		<span class="tlv_ident_hdl_code">.i_axi_arvalid(S_AXI_ARVALID),</span></span>
<span class="line" line-num="668" source-line-num="668">		<span class="tlv_ident_hdl_code">.i_axi_arready(S_AXI_ARREADY),</span></span>
<span class="line" line-num="669" source-line-num="669">		<span class="tlv_ident_hdl_code">.i_axi_araddr( S_AXI_ARADDR),</span></span>
<span class="line" line-num="670" source-line-num="670">		<span class="tlv_ident_hdl_code">.i_axi_arcache(4'h0),</span></span>
<span class="line" line-num="671" source-line-num="671">		<span class="tlv_ident_hdl_code">.i_axi_arprot( S_AXI_ARPROT),</span></span>
<span class="line" line-num="672" source-line-num="672">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="673" source-line-num="673">		<span class="tlv_ident_hdl_code">.i_axi_rvalid(S_AXI_RVALID),</span></span>
<span class="line" line-num="674" source-line-num="674">		<span class="tlv_ident_hdl_code">.i_axi_rready(S_AXI_RREADY),</span></span>
<span class="line" line-num="675" source-line-num="675">		<span class="tlv_ident_hdl_code">.i_axi_rdata( S_AXI_RDATA),</span></span>
<span class="line" line-num="676" source-line-num="676">		<span class="tlv_ident_hdl_code">.i_axi_rresp( S_AXI_RRESP),</span></span>
<span class="line" line-num="677" source-line-num="677">		<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="678" source-line-num="678">		<span class="tlv_ident_hdl_code">.f_axi_rd_outstanding(faxil_rd_outstanding),</span></span>
<span class="line" line-num="679" source-line-num="679">		<span class="tlv_ident_hdl_code">.f_axi_wr_outstanding(faxil_wr_outstanding),</span></span>
<span class="line" line-num="680" source-line-num="680">		<span class="tlv_ident_hdl_code">.f_axi_awr_outstanding(faxil_awr_outstanding)</span></span>
<span class="line" line-num="681" source-line-num="681">		<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="682" source-line-num="682">		<span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="683" source-line-num="683"></span>
<span class="line" line-num="684" source-line-num="684">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="685" source-line-num="685">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="686" source-line-num="686">		<span class="tlv_ident_hdl_code">assert(faxil_awr_outstanding== (S_AXI_BVALID ? 1:0)</span></span>
<span class="line" line-num="687" source-line-num="687">			<span class="tlv_ident_hdl_code">+(S_AXI_AWREADY ? 0:1));</span></span>
<span class="line" line-num="688" source-line-num="688"></span>
<span class="line" line-num="689" source-line-num="689">		<span class="tlv_ident_hdl_code">assert(faxil_wr_outstanding == (S_AXI_BVALID ? 1:0)</span></span>
<span class="line" line-num="690" source-line-num="690">			<span class="tlv_ident_hdl_code">+(S_AXI_WREADY ? 0:1));</span></span>
<span class="line" line-num="691" source-line-num="691"></span>
<span class="line" line-num="692" source-line-num="692">		<span class="tlv_ident_hdl_code">assert(faxil_rd_outstanding == (S_AXI_RVALID ? 1:0)</span></span>
<span class="line" line-num="693" source-line-num="693">			<span class="tlv_ident_hdl_code">+(S_AXI_ARREADY ? 0:1));</span></span>
<span class="line" line-num="694" source-line-num="694">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="695" source-line-num="695">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="696" source-line-num="696"></span>
<span class="line" line-num="697" source-line-num="697">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="698" source-line-num="698">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="699" source-line-num="699">	<span class="tlv_ident_comment">// Verifying the packet counters</span></span>
<span class="line" line-num="700" source-line-num="700">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="701" source-line-num="701">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="702" source-line-num="702">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="703" source-line-num="703">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="704" source-line-num="704">	<span class="tlv_ident_hdl_code">reg	[11:0]	f_reads, f_writes;</span></span>
<span class="line" line-num="705" source-line-num="705">	<span class="tlv_ident_hdl_code">reg	[3:0]	f_read_pkts, f_write_pkts;</span></span>
<span class="line" line-num="706" source-line-num="706"></span>
<span class="line" line-num="707" source-line-num="707">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="708" source-line-num="708">	<span class="tlv_ident_comment">// Mirror the read counter</span></span>
<span class="line" line-num="709" source-line-num="709">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="710" source-line-num="710">	<span class="tlv_ident_hdl_code">initial	f_reads      = 0;</span></span>
<span class="line" line-num="711" source-line-num="711">	<span class="tlv_ident_hdl_code">initial	f_read_pkts  = 0;</span></span>
<span class="line" line-num="712" source-line-num="712"></span>
<span class="line" line-num="713" source-line-num="713">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="714" source-line-num="714">	<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="715" source-line-num="715">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="716" source-line-num="716">		<span class="tlv_ident_hdl_code">f_reads &lt;= 0;</span></span>
<span class="line" line-num="717" source-line-num="717">		<span class="tlv_ident_hdl_code">f_read_pkts &lt;= 0;</span></span>
<span class="line" line-num="718" source-line-num="718">	<span class="tlv_ident_hdl_code">end else if (OPT_SINK &amp;&amp; (axil_read_ready</span></span>
<span class="line" line-num="719" source-line-num="719">			<span class="tlv_ident_hdl_code">&amp;&amp; arskd_addr == ADDR_SINK &amp;&amp; !rfifo_empty))</span></span>
<span class="line" line-num="720" source-line-num="720">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="721" source-line-num="721">		<span class="tlv_ident_hdl_code">f_reads &lt;= f_reads + 1;</span></span>
<span class="line" line-num="722" source-line-num="722">		<span class="tlv_ident_hdl_code">f_read_pkts &lt;= f_read_pkts + (rfifo_last ? 1:0);</span></span>
<span class="line" line-num="723" source-line-num="723">	<span class="tlv_ident_hdl_code">end else if (!OPT_SINK &amp;&amp; S_AXIS_TVALID)</span></span>
<span class="line" line-num="724" source-line-num="724">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="725" source-line-num="725">		<span class="tlv_ident_hdl_code">f_reads &lt;= f_reads + 1;</span></span>
<span class="line" line-num="726" source-line-num="726">		<span class="tlv_ident_hdl_code">f_read_pkts &lt;= f_read_pkts + (S_AXIS_TLAST ? 1:0);</span></span>
<span class="line" line-num="727" source-line-num="727">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="728" source-line-num="728"></span>
<span class="line" line-num="729" source-line-num="729">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="730" source-line-num="730">		<span class="tlv_ident_hdl_code">assert(f_reads == reads_completed);</span></span>
<span class="line" line-num="731" source-line-num="731">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="732" source-line-num="732">		<span class="tlv_ident_hdl_code">assert(f_read_pkts == read_bursts_completed);</span></span>
<span class="line" line-num="733" source-line-num="733"></span>
<span class="line" line-num="734" source-line-num="734">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="735" source-line-num="735">	<span class="tlv_ident_hdl_code">if (!OPT_SINK)</span></span>
<span class="line" line-num="736" source-line-num="736">		<span class="tlv_ident_hdl_code">assert(S_AXIS_TREADY);</span></span>
<span class="line" line-num="737" source-line-num="737"></span>
<span class="line" line-num="738" source-line-num="738">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="739" source-line-num="739">	<span class="tlv_ident_comment">// Mirror the write counter</span></span>
<span class="line" line-num="740" source-line-num="740">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="741" source-line-num="741">	<span class="tlv_ident_hdl_code">initial	f_writes     = 0;</span></span>
<span class="line" line-num="742" source-line-num="742">	<span class="tlv_ident_hdl_code">initial	f_write_pkts = 0;</span></span>
<span class="line" line-num="743" source-line-num="743">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="744" source-line-num="744">	<span class="tlv_ident_hdl_code">if (!S_AXI_ARESETN)</span></span>
<span class="line" line-num="745" source-line-num="745">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="746" source-line-num="746">		<span class="tlv_ident_hdl_code">f_writes &lt;= 0;</span></span>
<span class="line" line-num="747" source-line-num="747">		<span class="tlv_ident_hdl_code">f_write_pkts &lt;= 0;</span></span>
<span class="line" line-num="748" source-line-num="748">	<span class="tlv_ident_hdl_code">end else if (OPT_SOURCE &amp;&amp; M_AXIS_TVALID &amp;&amp; M_AXIS_TREADY)</span></span>
<span class="line" line-num="749" source-line-num="749">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="750" source-line-num="750">		<span class="tlv_ident_hdl_code">f_writes &lt;= f_writes + 1;</span></span>
<span class="line" line-num="751" source-line-num="751">		<span class="tlv_ident_hdl_code">f_write_pkts &lt;= f_write_pkts + (M_AXIS_TLAST ? 1:0);</span></span>
<span class="line" line-num="752" source-line-num="752">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="753" source-line-num="753"></span>
<span class="line" line-num="754" source-line-num="754">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="755" source-line-num="755">	<span class="tlv_ident_hdl_code">if (!OPT_SOURCE)</span></span>
<span class="line" line-num="756" source-line-num="756">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="757" source-line-num="757">		<span class="tlv_ident_hdl_code">assert(f_writes == 0);</span></span>
<span class="line" line-num="758" source-line-num="758">		<span class="tlv_ident_hdl_code">assert(f_write_pkts == 0);</span></span>
<span class="line" line-num="759" source-line-num="759">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="760" source-line-num="760"></span>
<span class="line" line-num="761" source-line-num="761">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="762" source-line-num="762">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="763" source-line-num="763">		<span class="tlv_ident_hdl_code">assert(f_writes == writes_completed);</span></span>
<span class="line" line-num="764" source-line-num="764">		<span class="tlv_ident_hdl_code">assert(f_write_pkts == write_bursts_completed);</span></span>
<span class="line" line-num="765" source-line-num="765">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="766" source-line-num="766">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="767" source-line-num="767"></span>
<span class="line" line-num="768" source-line-num="768">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="769" source-line-num="769">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="770" source-line-num="770">	<span class="tlv_ident_comment">// Verify the read result</span></span>
<span class="line" line-num="771" source-line-num="771">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="772" source-line-num="772">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="773" source-line-num="773">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="774" source-line-num="774">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="775" source-line-num="775">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="776" source-line-num="776">	<span class="tlv_ident_hdl_code">if (f_past_valid &amp;&amp; $past(S_AXI_ARESETN &amp;&amp; axil_read_ready))</span></span>
<span class="line" line-num="777" source-line-num="777">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="778" source-line-num="778">		<span class="tlv_ident_hdl_code">assert(S_AXI_RVALID);</span></span>
<span class="line" line-num="779" source-line-num="779">		<span class="tlv_ident_hdl_code">case($past(arskd_addr))</span></span>
<span class="line" line-num="780" source-line-num="780">		<span class="tlv_ident_hdl_code">ADDR_SINK: begin</span></span>
<span class="line" line-num="781" source-line-num="781">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[SW-1:0] == $past(rfifo_data));</span></span>
<span class="line" line-num="782" source-line-num="782">			<span class="tlv_ident_hdl_code">if (SW &lt; C_AXI_DATA_WIDTH)</span></span>
<span class="line" line-num="783" source-line-num="783">			<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="784" source-line-num="784">				<span class="tlv_ident_hdl_code">if (OPT_SIGN_EXTEND &amp;&amp; $past(rfifo_data[SW-1]))</span></span>
<span class="line" line-num="785" source-line-num="785">					<span class="tlv_ident_hdl_code">assert(&amp;S_AXI_RDATA[C_AXI_DATA_WIDTH-1:SW]);</span></span>
<span class="line" line-num="786" source-line-num="786">				<span class="tlv_ident_hdl_code">else</span></span>
<span class="line" line-num="787" source-line-num="787">					<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[C_AXI_DATA_WIDTH-1:SW] == 0);</span></span>
<span class="line" line-num="788" source-line-num="788">			<span class="tlv_ident_hdl_code">end end</span></span>
<span class="line" line-num="789" source-line-num="789">		<span class="tlv_ident_comment">// 1: assert(S_AXI_RDATA == $past(r1));</span></span>
<span class="line" line-num="790" source-line-num="790">		<span class="tlv_ident_hdl_code">ADDR_STATS: begin</span></span>
<span class="line" line-num="791" source-line-num="791">			<span class="tlv_ident_hdl_code">assert(S_AXI_RRESP == 2'b00);</span></span>
<span class="line" line-num="792" source-line-num="792">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[31:28]</span></span>
<span class="line" line-num="793" source-line-num="793">					<span class="tlv_ident_hdl_code">== $past(write_bursts_completed));</span></span>
<span class="line" line-num="794" source-line-num="794">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[27:16] == $past(writes_completed));</span></span>
<span class="line" line-num="795" source-line-num="795"></span>
<span class="line" line-num="796" source-line-num="796">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[15:12]</span></span>
<span class="line" line-num="797" source-line-num="797">					<span class="tlv_ident_hdl_code">== $past(read_bursts_completed));</span></span>
<span class="line" line-num="798" source-line-num="798">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[11:0] == $past(reads_completed));</span></span>
<span class="line" line-num="799" source-line-num="799">			<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="800" source-line-num="800">		<span class="tlv_ident_hdl_code">ADDR_FIFO: begin</span></span>
<span class="line" line-num="801" source-line-num="801">			<span class="tlv_ident_hdl_code">assert(S_AXI_RRESP == 2'b00);</span></span>
<span class="line" line-num="802" source-line-num="802">			<span class="tlv_ident_hdl_code">if (LGFIFO &lt; 16)</span></span>
<span class="line" line-num="803" source-line-num="803">				<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[31:16+LGFIFO+1] == 0);</span></span>
<span class="line" line-num="804" source-line-num="804">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[16+: LGFIFO+1]==$past(wfifo_fill));</span></span>
<span class="line" line-num="805" source-line-num="805">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[15] == $past(rfifo_last));</span></span>
<span class="line" line-num="806" source-line-num="806">			<span class="tlv_ident_hdl_code">if (LGFIFO &lt; 15)</span></span>
<span class="line" line-num="807" source-line-num="807">				<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[14:LGFIFO+1] == 0);</span></span>
<span class="line" line-num="808" source-line-num="808">			<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA[ 0+: LGFIFO+1]==$past(rfifo_fill));</span></span>
<span class="line" line-num="809" source-line-num="809">			<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="810" source-line-num="810">		<span class="tlv_ident_hdl_code">default: begin end</span></span>
<span class="line" line-num="811" source-line-num="811">		<span class="tlv_ident_hdl_code">endcase</span></span>
<span class="line" line-num="812" source-line-num="812">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="813" source-line-num="813"></span>
<span class="line" line-num="814" source-line-num="814">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="815" source-line-num="815">	<span class="tlv_ident_comment">// Check that our low-power only logic works by verifying that anytime</span></span>
<span class="line" line-num="816" source-line-num="816">	<span class="tlv_ident_comment">// S_AXI_RVALID is inactive, then the outgoing data is also zero.</span></span>
<span class="line" line-num="817" source-line-num="817">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="818" source-line-num="818">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="819" source-line-num="819">	<span class="tlv_ident_hdl_code">if (OPT_LOWPOWER &amp;&amp; !S_AXI_RVALID)</span></span>
<span class="line" line-num="820" source-line-num="820">		<span class="tlv_ident_hdl_code">assert(S_AXI_RDATA == 0);</span></span>
<span class="line" line-num="821" source-line-num="821"></span>
<span class="line" line-num="822" source-line-num="822">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="823" source-line-num="823"></span>
<span class="line" line-num="824" source-line-num="824">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="825" source-line-num="825">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="826" source-line-num="826">	<span class="tlv_ident_comment">// The AXI-stream interfaces</span></span>
<span class="line" line-num="827" source-line-num="827">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="828" source-line-num="828">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="829" source-line-num="829">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="830" source-line-num="830">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="831" source-line-num="831"></span>
<span class="line" line-num="832" source-line-num="832">	<span class="tlv_ident_comment">// Slave/consumer properties</span></span>
<span class="line" line-num="833" source-line-num="833">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="834" source-line-num="834">	<span class="tlv_ident_hdl_code">if (!f_past_valid || !$past(S_AXI_ARESETN))</span></span>
<span class="line" line-num="835" source-line-num="835">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="836" source-line-num="836">		<span class="tlv_ident_hdl_code">assume(!S_AXIS_TVALID);</span></span>
<span class="line" line-num="837" source-line-num="837">	<span class="tlv_ident_hdl_code">end else if ($past(S_AXIS_TVALID &amp;&amp; !S_AXIS_TREADY))</span></span>
<span class="line" line-num="838" source-line-num="838">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="839" source-line-num="839">		<span class="tlv_ident_hdl_code">assume(S_AXIS_TVALID);</span></span>
<span class="line" line-num="840" source-line-num="840">		<span class="tlv_ident_hdl_code">assume($stable(S_AXIS_TDATA));</span></span>
<span class="line" line-num="841" source-line-num="841">		<span class="tlv_ident_hdl_code">assume($stable(S_AXIS_TLAST));</span></span>
<span class="line" line-num="842" source-line-num="842">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="843" source-line-num="843"></span>
<span class="line" line-num="844" source-line-num="844">	<span class="tlv_ident_comment">// Master/producer/source properties</span></span>
<span class="line" line-num="845" source-line-num="845">	<span class="tlv_ident_hdl_code">always @(posedge S_AXI_ACLK)</span></span>
<span class="line" line-num="846" source-line-num="846">	<span class="tlv_ident_hdl_code">if (!f_past_valid || !$past(S_AXI_ARESETN))</span></span>
<span class="line" line-num="847" source-line-num="847">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="848" source-line-num="848">		<span class="tlv_ident_hdl_code">assert(!M_AXIS_TVALID);</span></span>
<span class="line" line-num="849" source-line-num="849">	<span class="tlv_ident_hdl_code">end else if ($past(M_AXIS_TVALID &amp;&amp; !M_AXIS_TREADY))</span></span>
<span class="line" line-num="850" source-line-num="850">	<span class="tlv_ident_hdl_code">begin</span></span>
<span class="line" line-num="851" source-line-num="851">		<span class="tlv_ident_hdl_code">assert(M_AXIS_TVALID);</span></span>
<span class="line" line-num="852" source-line-num="852">		<span class="tlv_ident_hdl_code">assert($stable(M_AXIS_TDATA));</span></span>
<span class="line" line-num="853" source-line-num="853">		<span class="tlv_ident_hdl_code">assert($stable(M_AXIS_TLAST));</span></span>
<span class="line" line-num="854" source-line-num="854">	<span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="855" source-line-num="855">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="856" source-line-num="856">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="857" source-line-num="857">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="858" source-line-num="858">	<span class="tlv_ident_comment">// Cover checks</span></span>
<span class="line" line-num="859" source-line-num="859">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="860" source-line-num="860">	<span class="tlv_ident_comment">////////////////////////////////////////////////////////////////////////</span></span>
<span class="line" line-num="861" source-line-num="861">	<span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="862" source-line-num="862">	<span class="tlv_ident_comment">// {{{</span></span>
<span class="line" line-num="863" source-line-num="863"></span>
<span class="line" line-num="864" source-line-num="864">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="865" source-line-num="865">		<span class="tlv_ident_hdl_code">cover(S_AXI_ARESETN &amp;&amp; writes_completed == 16);</span></span>
<span class="line" line-num="866" source-line-num="866"></span>
<span class="line" line-num="867" source-line-num="867">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="868" source-line-num="868">		<span class="tlv_ident_hdl_code">cover(S_AXI_ARESETN &amp;&amp; reads_completed == 16);</span></span>
<span class="line" line-num="869" source-line-num="869"></span>
<span class="line" line-num="870" source-line-num="870">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="871" source-line-num="871">		<span class="tlv_ident_hdl_code">cover(S_AXI_ARESETN &amp;&amp; writes_completed == 16</span></span>
<span class="line" line-num="872" source-line-num="872">				<span class="tlv_ident_hdl_code">&amp;&amp; reads_completed == 16);</span></span>
<span class="line" line-num="873" source-line-num="873"></span>
<span class="line" line-num="874" source-line-num="874">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="875" source-line-num="875">		<span class="tlv_ident_hdl_code">cover(S_AXI_BVALID &amp;&amp; S_AXI_BRESP != 2'b00);</span></span>
<span class="line" line-num="876" source-line-num="876"></span>
<span class="line" line-num="877" source-line-num="877">	<span class="tlv_ident_hdl_code">always @(*)</span></span>
<span class="line" line-num="878" source-line-num="878">		<span class="tlv_ident_hdl_code">cover(S_AXI_RVALID &amp;&amp; S_AXI_RRESP != 2'b00);</span></span>
<span class="line" line-num="879" source-line-num="879"></span>
<span class="line" line-num="880" source-line-num="880">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="881" source-line-num="881">	<span class="tlv_ident_comment">// }}}</span></span>
<span class="line" line-num="882" source-line-num="882"><span class="tlv_ident_hdl_code">`endif</span></span>
<span class="line" line-num="883" source-line-num="883"><span class="tlv_ident_hdl_code">endmodule</span></span>
<span class="line" line-num="884" source-line-num="884">  <span class="tlv_ident_comment">// =========================================</span></span>
<span class="line" line-num="885" source-line-num="885">   <span class="tlv_ident_comment">// Welcome!  Try the tutorials via the menu.</span></span>
<span class="line" line-num="886" source-line-num="886">   <span class="tlv_ident_comment">// =========================================</span></span>
<span class="line" line-num="887" source-line-num="887"></span>
<span class="line" line-num="888" source-line-num="888">   <span class="tlv_ident_comment">// Default Makerchip TL-Verilog Code Template</span></span>
<span class="line" line-num="889" source-line-num="889">   </span>
<span class="line" line-num="890" source-line-num="890">   <span class="tlv_ident_comment">// Macro providing required top-level module definition, random</span></span>
<span class="line" line-num="891" source-line-num="891">   <span class="tlv_ident_comment">// stimulus support, and Verilator config.</span></span>
<span class="line" line-num="892" source-line-num="892">   <span class="tlv_ident_hdl_code">module top(input logic clk, input logic reset, input logic [31:0] cyc_cnt, output logic passed, output logic failed);    </span><span class="tlv_ident_comment">/* verilator lint_save */ /* verilator lint_off UNOPTFLAT */  </span><span class="tlv_ident_hdl_code">bit [256:0] RW_rand_raw; bit [256+63:0] RW_rand_vect; pseudo_rand #(.WIDTH(257)) pseudo_rand (clk, reset, RW_rand_raw[256:0]); assign RW_rand_vect[256+63:0] = {RW_rand_raw[62:0], RW_rand_raw};  </span><span class="tlv_ident_comment">/* verilator lint_restore */  /* verilator lint_off WIDTH */ /* verilator lint_off UNOPTFLAT */   // (Expanded in Nav-TLV pane.)</span></span>
<span class="line" line-num="893" source-line-num="893"><span class="tlv_ident_keyword1">\TLV</span></span>
<span class="line" line-num="894" source-line-num="894">   <span class="tlv_ident_pipeline" logical_entity="|axil">|axil</span></span>
<span class="line" line-num="895" source-line-num="895">      </span>
<span class="line" line-num="896" source-line-num="896">      <span class="tlv_ident_stage_expr" logical_entity="|axil@0">@0</span></span>
<span class="line" line-num="897" source-line-num="897">         <span class="tlv_ident_keyword1">\SV_plus </span></span>
<span class="line" line-num="898" source-line-num="898">            <span class="tlv_ident_hdl_code">parameter C_AXI_ADDR_WIDTH = 4;</span></span>
<span class="line" line-num="899" source-line-num="899">            <span class="tlv_ident_hdl_code">localparam C_AXI_DATA_WIDTH = 32;</span></span>
<span class="line" line-num="900" source-line-num="900">            <span class="tlv_ident_hdl_code">parameter C_AXIS_DATA_WIDTH = 16;</span></span>
<span class="tlx_except_node_anchor no-select"><span class=tlx_except_container>         <span class="tlx_except" sev="warning" title="Signal |axil$reset is assigned but never used.
To silence this message use &quot;`BOGUS_USE($reset)&quot;.">      </span></span></span><span class="line" line-num="901" source-line-num="901">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|axil$reset">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">reset;</span></span>
<span class="line" line-num="902" source-line-num="902">         <span class="tlv_ident_malformed_assigned_sig" logical_entity="|axil$S_AXI_AWVALID">$S_AXI_AWVALID</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWVALID;</span></span>
<span class="line" line-num="903" source-line-num="903">         <span class="tlv_ident_malformed_assigned_sig" logical_entity="|axil$S_AXI_AWREADY">$S_AXI_AWREADY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWREADY;</span></span>
<span class="line" line-num="904" source-line-num="904">         <span class="tlv_ident_malformed_assigned_sig" logical_entity="|axil$S_AXI_AWADDR">$S_AXI_AWADDR</span><span class="tlv_ident_malformed_sig">[</span><span class="tlv_ident_hdl_code">C_AXI_ADDR_WIDTH-1</span><span class="tlv_ident_malformed_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_malformed_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWADDR;</span></span>
<span class="line" line-num="905" source-line-num="905">         </span>
<span class="line" line-num="906" source-line-num="906">         <span class="tlv_ident_malformed_assigned_sig" logical_entity="|axil$S_AXI_WVALID">$S_AXI_WVALID</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_WVALID;</span></span>
<span class="line" line-num="907" source-line-num="907">         <span class="tlv_ident_malformed_assigned_sig" logical_entity="|axil$S_AXI_WREADY">$S_AXI_WREADY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_WREADY;</span></span>
<span class="line" line-num="908" source-line-num="908">         </span>
<span class="line" line-num="909" source-line-num="909">      <span class="tlv_ident_stage_expr" logical_entity="|axil@10">@5</span></span>
<span class="line" line-num="910" source-line-num="910">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWVALID = </span><span class="tlv_ident_malformed_sig" logical_entity="|axil$S_AXI_AWVALID">$S_AXI_AWVALID</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="911" source-line-num="911">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWADDR = </span><span class="tlv_ident_malformed_sig" logical_entity="|axil$S_AXI_AWADDR">$S_AXI_AWADDR</span><span class="tlv_ident_malformed_sig">[</span><span class="tlv_ident_hdl_code">C_AXI_ADDR_WIDTH-1</span><span class="tlv_ident_malformed_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_malformed_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="912" source-line-num="912">         </span>
<span class="line" line-num="913" source-line-num="913">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_AWREADY = </span><span class="tlv_ident_malformed_sig" logical_entity="|axil$S_AXI_AWREADY">$S_AXI_AWREADY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="914" source-line-num="914">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_WVALID = </span><span class="tlv_ident_malformed_sig" logical_entity="|axil$S_AXI_WVALID">$S_AXI_WVALID</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="915" source-line-num="915">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">S_AXI_WREADY = </span><span class="tlv_ident_malformed_sig" logical_entity="|axil$S_AXI_WREADY">$S_AXI_WREADY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="916" source-line-num="916">         </span>
<span class="line" line-num="917" source-line-num="917">         </span>
<span class="line" line-num="918" source-line-num="918">         </span>
<span class="line" line-num="919" source-line-num="919">         </span>
<span class="line" line-num="920" source-line-num="920">         </span>
<span class="line" line-num="921" source-line-num="921">         </span>
<span class="line" line-num="922" source-line-num="922">         </span>
<span class="line" line-num="923" source-line-num="923">       </span>
<span class="line" line-num="924" source-line-num="924">         </span>
<span class="line" line-num="925" source-line-num="925"></span>
<span class="line" line-num="926" source-line-num="926">   <span class="tlv_ident_comment">//...</span></span>
<span class="line" line-num="927" source-line-num="927"></span>
<span class="line" line-num="928" source-line-num="928">   <span class="tlv_ident_comment">// Assert these to end simulation (before Makerchip cycle limit).</span></span>
<span class="line" line-num="929" source-line-num="929">   <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">passed = </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">cyc_cnt &gt; 40;</span></span>
<span class="line" line-num="930" source-line-num="930">   <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">failed = 1'b0;</span></span>
<span class="line" line-num="931" source-line-num="931"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="932" source-line-num="932">   <span class="tlv_ident_hdl_code">endmodule</span></span>

</pre>

</body>
</html>
