<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta http-equiv="description" content="top.html">
   <meta http-equiv="keywords" content="tl-verilog">

   <title>top.m4</title>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
   <script src="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/ide.js"></script>
   <link rel="stylesheet" href="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/ide.css" />

<style>
/*
Copyright (c) 2015, Steven F. Hoover
All rights reserved.
*/
.tlv_ident_error {
  color: red;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipeline {
  color: orange;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_1 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_2 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_grouping {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_state_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_assigned_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_state_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_malformed_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_malformed_assigned_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_phys_hier {
  color: blue;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_phys_beh_hier {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_stage_name {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_next_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_incr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_prev_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_decr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_alignment_expr_1ab {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_expr_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_keyword_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_zero_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_crosspipe_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_tlv_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_misc_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_sv_sig {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_datatype {
  color: DarkRed;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_keyword1 {
  color: Blue;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_comment {
  color: #808080;
  font-style: italic;
  font-weight: 600;
}
.tlv_ident_hdl_code {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}

</style>

</head>

<body>

<h2>top.m4</h2>

<pre>
<span class="line" line-num="1" source-line-num="1"><span class="tlv_ident_keyword1">\TLV_version 1d: tl-x.org</span></span>
<span class="line" line-num="2" source-line-num="2"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="3" source-line-num="3"> </span>
<span class="line" line-num="4" source-line-num="4">   <span class="tlv_ident_comment">// Included URL: &quot;https://raw.githubusercontent.com/stevehoover/RISC-V_MYTH_Workshop/c1719d5b338896577b79ee76c2f443ca2a76e14f/tlv_lib/risc-v_shell_lib.tlv&quot;// Included URL: &quot;https://raw.githubusercontent.com/stevehoover/warp-v_includes/2d6d36baa4d2bc62321f982f78c8fe1456641a43/risc-v_defs.tlv&quot;</span></span>
<span class="line" line-num="5" source-line-num="5"></span>
<span class="line" line-num="6" source-line-num="6"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="7" source-line-num="7">   <span class="tlv_ident_hdl_code">module top(input logic clk, input logic reset, input logic [31:0] cyc_cnt, output logic passed, output logic failed);    </span><span class="tlv_ident_comment">/* verilator lint_save */ /* verilator lint_off UNOPTFLAT */  </span><span class="tlv_ident_hdl_code">bit [256:0] RW_rand_raw; bit [256+63:0] RW_rand_vect; pseudo_rand #(.WIDTH(257)) pseudo_rand (clk, reset, RW_rand_raw[256:0]); assign RW_rand_vect[256+63:0] = {RW_rand_raw[62:0], RW_rand_raw};  </span><span class="tlv_ident_comment">/* verilator lint_restore */  /* verilator lint_off WIDTH */ /* verilator lint_off UNOPTFLAT */   // (Expanded in Nav-TLV pane.)</span></span>
<span class="line" line-num="8" source-line-num="8"><span class="tlv_ident_keyword1">\TLV</span></span>
<span class="line" line-num="9" source-line-num="9"></span>
<span class="line" line-num="10" source-line-num="10">   <span class="tlv_ident_comment">// /====================\</span></span>
<span class="line" line-num="11" source-line-num="11">   <span class="tlv_ident_comment">// | Sum 1 to 9 Program |</span></span>
<span class="line" line-num="12" source-line-num="12">   <span class="tlv_ident_comment">// \====================/</span></span>
<span class="line" line-num="13" source-line-num="13">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="14" source-line-num="14">   <span class="tlv_ident_comment">// Program for MYTH Workshop to test RV32I</span></span>
<span class="line" line-num="15" source-line-num="15">   <span class="tlv_ident_comment">// Add 1,2,3,...,9 (in that order).</span></span>
<span class="line" line-num="16" source-line-num="16">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="17" source-line-num="17">   <span class="tlv_ident_comment">// Regs:</span></span>
<span class="line" line-num="18" source-line-num="18">   <span class="tlv_ident_comment">//  r10 (a0): In: 0, Out: final sum</span></span>
<span class="line" line-num="19" source-line-num="19">   <span class="tlv_ident_comment">//  r12 (a2): 10</span></span>
<span class="line" line-num="20" source-line-num="20">   <span class="tlv_ident_comment">//  r13 (a3): 1..10</span></span>
<span class="line" line-num="21" source-line-num="21">   <span class="tlv_ident_comment">//  r14 (a4): Sum</span></span>
<span class="line" line-num="22" source-line-num="22">   <span class="tlv_ident_comment">// </span></span>
<span class="line" line-num="23" source-line-num="23">   <span class="tlv_ident_comment">// External to function:</span></span>
<span class="line" line-num="24" source-line-num="24">   <span class="tlv_ident_comment">// Inst #0: ADD,r10,r0,r0             // Initialize r10 (a0) to 0.</span></span>
<span class="line" line-num="25" source-line-num="25">   <span class="tlv_ident_comment">// Function:</span></span>
<span class="line" line-num="26" source-line-num="26">   <span class="tlv_ident_comment">// Inst #1: ADD,r14,r10,r0            // Initialize sum register a4 with 0x0</span></span>
<span class="line" line-num="27" source-line-num="27">   <span class="tlv_ident_comment">// Inst #2: ADDI,r12,r10,1010         // Store count of 10 in register a2.</span></span>
<span class="line" line-num="28" source-line-num="28">   <span class="tlv_ident_comment">// Inst #3: ADD,r13,r10,r0            // Initialize intermediate sum register a3 with 0</span></span>
<span class="line" line-num="29" source-line-num="29">   <span class="tlv_ident_comment">// Loop:</span></span>
<span class="line" line-num="30" source-line-num="30">   <span class="tlv_ident_comment">// Inst #4: ADD,r14,r13,r14           // Incremental addition</span></span>
<span class="line" line-num="31" source-line-num="31">   <span class="tlv_ident_comment">// Inst #5: ADDI,r13,r13,1            // Increment intermediate register by 1</span></span>
<span class="line" line-num="32" source-line-num="32">   <span class="tlv_ident_comment">// Inst #6: BLT,r13,r12,1111111111000 // If a3 is less than a2, branch to label named &lt;loop&gt;</span></span>
<span class="line" line-num="33" source-line-num="33">   <span class="tlv_ident_comment">// Inst #7: ADD,r10,r14,r0            // Store final result to register a0 so that it can be read by main program</span></span>
<span class="line" line-num="34" source-line-num="34">   <span class="tlv_ident_comment">// Inst #8: SW,r0,r10,100</span></span>
<span class="line" line-num="35" source-line-num="35">   <span class="tlv_ident_comment">// Inst #9: LW,r15,r0,100</span></span>
<span class="line" line-num="36" source-line-num="36">   <span class="tlv_ident_comment">// Optional:</span></span>
<span class="line" line-num="37" source-line-num="37">   <span class="tlv_ident_comment">// m4_asm(JAL, r7, 00000000000000000000) // Done. Jump to itself (infinite loop). (Up to 20-bit signed immediate plus implicit 0 bit (unlike JALR) provides byte address; last immediate bit should also be 0)</span></span>
<span class="line" line-num="38" source-line-num="38">   </span>
<span class="line" line-num="39" source-line-num="39">   <span class="tlv_ident_pipeline" logical_entity="|cpu">|cpu</span></span>
<span class="line" line-num="40" source-line-num="40">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@0">@0</span></span>
<span class="line" line-num="41" source-line-num="41">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$reset">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">reset;</span></span>
<span class="line" line-num="42" source-line-num="42">         <span class="tlv_ident_comment">//$pc[31:0] = &gt;&gt;1$reset ? 32'd0 : &gt;&gt;1$taken_br ? &gt;&gt;1$br_tgt_pc  : &gt;&gt;1$inc_pc;</span></span>
<span class="line" line-num="43" source-line-num="43">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$pc">$pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@2">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$reset">$reset</span> <span class="tlv_ident_hdl_code">? 32'd0 :</span></span>
<span class="line" line-num="44" source-line-num="44">                     <span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_taken_br">$valid_taken_br</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$br_tgt_pc">$br_tgt_pc</span>  <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="45" source-line-num="45">                     <span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$inc_pc">$inc_pc</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="46" source-line-num="46">                     <span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_jump">$valid_jump</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jal">$is_jal</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$br_tgt_pc">$br_tgt_pc</span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="47" source-line-num="47">                     <span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_jump">$valid_jump</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jalr">$is_jalr</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;3</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$jalr_tgt_pc">$jalr_tgt_pc</span> <span class="tlv_ident_hdl_code">: </span></span>
<span class="line" line-num="48" source-line-num="48">                     <span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@2">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$inc_pc">$inc_pc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="49" source-line-num="49">         <span class="tlv_ident_comment">//Start and Valid signals</span></span>
<span class="line" line-num="50" source-line-num="50">         <span class="tlv_ident_comment">//$start = &gt;&gt;1$reset &amp;&amp; !($reset);</span></span>
<span class="line" line-num="51" source-line-num="51">         <span class="tlv_ident_comment">//$valid = $reset ? 0 : ( $start ? 1 : &gt;&gt;3$valid );         </span></span>
<span class="line" line-num="52" source-line-num="52">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@2">@1</span></span>
<span class="line" line-num="53" source-line-num="53">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$inc_pc">$inc_pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">+ 32'd4;</span></span>
<span class="line" line-num="54" source-line-num="54">         <span class="tlv_ident_comment">//`BOGUS_USE($is_beq $is_bne $is_blt $is_bge $is_bltu $is_bgeu $is_addi $is_add)</span></span>
<span class="line" line-num="55" source-line-num="55">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$imem_rd_addr">$imem_rd_addr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4+1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="56" source-line-num="56">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$imem_rd_en">$imem_rd_en</span> <span class="tlv_ident_hdl_code">= !</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$reset">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="57" source-line-num="57">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imem_rd_data">$imem_rd_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="58" source-line-num="58">         <span class="tlv_ident_comment">//Intruction Type Decode Logic for Immediate Instruction types</span></span>
<span class="line" line-num="59" source-line-num="59">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_i_instr">$is_i_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b0000x || </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b001x0 || </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b11001 || </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b11100; </span></span>
<span class="line" line-num="60" source-line-num="60">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_u_instr">$is_u_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b0x101;</span></span>
<span class="line" line-num="61" source-line-num="61">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b0100x;</span></span>
<span class="line" line-num="62" source-line-num="62">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b01011 || </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b011x0 || </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b10100;</span></span>
<span class="line" line-num="63" source-line-num="63">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_b_instr">$is_b_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b11000;</span></span>
<span class="line" line-num="64" source-line-num="64">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_j_instr">$is_j_instr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">==? 5'b11011;</span></span>
<span class="line" line-num="65" source-line-num="65">         <span class="tlv_ident_comment">//Extraction of immediate instruction field</span></span>
<span class="line" line-num="66" source-line-num="66">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_i_instr">$is_i_instr</span> <span class="tlv_ident_hdl_code">? { {21{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">30</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">20</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">} :</span></span>
<span class="line" line-num="67" source-line-num="67">                      <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">? { {21{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">30</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">25</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">11</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">} :</span></span>
<span class="line" line-num="68" source-line-num="68">                      <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_b_instr">$is_b_instr</span> <span class="tlv_ident_hdl_code">? { {20{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">30</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">25</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">11</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">8</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, 1'b0 } :</span></span>
<span class="line" line-num="69" source-line-num="69">                      <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_u_instr">$is_u_instr</span> <span class="tlv_ident_hdl_code">? { </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">12</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, 12'b0 } :</span></span>
<span class="line" line-num="70" source-line-num="70">                      <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_j_instr">$is_j_instr</span> <span class="tlv_ident_hdl_code">? { {12{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">19</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">12</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">20</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">30</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">21</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">, 1'b0 } :</span></span>
<span class="line" line-num="71" source-line-num="71">                      <span class="tlv_ident_hdl_code">32'b0;</span></span>
<span class="line" line-num="72" source-line-num="72">         <span class="tlv_ident_comment">//Extraction of other instruction field</span></span>
<span class="line" line-num="73" source-line-num="73">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rs2_valid">$rs2_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_b_instr">$is_b_instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="74" source-line-num="74">         <span class="tlv_ident_when">?$rs2_valid</span></span>
<span class="line" line-num="75" source-line-num="75">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rs2">$rs2</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">24</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">20</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="76" source-line-num="76">         </span>
<span class="line" line-num="77" source-line-num="77">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rs1_valid">$rs1_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_i_instr">$is_i_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_b_instr">$is_b_instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="78" source-line-num="78">         <span class="tlv_ident_when">?$rs1_valid</span></span>
<span class="line" line-num="79" source-line-num="79">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rs1">$rs1</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">19</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">15</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="80" source-line-num="80">         </span>
<span class="line" line-num="81" source-line-num="81">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$funct3_valid">$funct3_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_i_instr">$is_i_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_b_instr">$is_b_instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="82" source-line-num="82">         <span class="tlv_ident_when">?$funct3_valid</span></span>
<span class="line" line-num="83" source-line-num="83">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$funct3">$funct3</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">14</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">12</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="84" source-line-num="84">         </span>
<span class="line" line-num="85" source-line-num="85">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$funct7_valid">$funct7_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="86" source-line-num="86">         <span class="tlv_ident_when">?$funct7_valid</span></span>
<span class="line" line-num="87" source-line-num="87">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$funct7">$funct7</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">25</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="88" source-line-num="88">         </span>
<span class="line" line-num="89" source-line-num="89">         <span class="tlv_ident_comment">//Instruction Decode</span></span>
<span class="line" line-num="90" source-line-num="90">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$opcode">$opcode</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">6</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="91" source-line-num="91">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@4">@2</span></span>
<span class="line" line-num="92" source-line-num="92">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">10</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= { </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$funct7">$funct7</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$funct3">$funct3</span> <span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$opcode">$opcode</span> <span class="tlv_ident_hdl_code">};</span></span>
<span class="line" line-num="93" source-line-num="93">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_beq">$is_beq</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_000_1100011;</span></span>
<span class="line" line-num="94" source-line-num="94">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_bne">$is_bne</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_001_1100011;</span></span>
<span class="line" line-num="95" source-line-num="95">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_blt">$is_blt</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_100_1100011;</span></span>
<span class="line" line-num="96" source-line-num="96">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_bge">$is_bge</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_101_1100011;</span></span>
<span class="line" line-num="97" source-line-num="97">         </span>
<span class="line" line-num="98" source-line-num="98">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_bltu">$is_bltu</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_110_1100011;</span></span>
<span class="line" line-num="99" source-line-num="99">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_bgeu">$is_bgeu</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_111_1100011;</span></span>
<span class="line" line-num="100" source-line-num="100">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_addi">$is_addi</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_000_0010011;</span></span>
<span class="line" line-num="101" source-line-num="101">         </span>
<span class="line" line-num="102" source-line-num="102">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_add">$is_add</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_000_0110011;</span></span>
<span class="line" line-num="103" source-line-num="103">         </span>
<span class="line" line-num="104" source-line-num="104">         <span class="tlv_ident_comment">//Remaining instructions</span></span>
<span class="line" line-num="105" source-line-num="105">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sub">$is_sub</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b1_000_0110011;</span></span>
<span class="line" line-num="106" source-line-num="106">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sll">$is_sll</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_001_0110011;</span></span>
<span class="line" line-num="107" source-line-num="107">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_slt">$is_slt</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_010_0110011;</span></span>
<span class="line" line-num="108" source-line-num="108">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sltu">$is_sltu</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_011_0110011;</span></span>
<span class="line" line-num="109" source-line-num="109">         </span>
<span class="line" line-num="110" source-line-num="110">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_xor">$is_xor</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_100_0110011;</span></span>
<span class="line" line-num="111" source-line-num="111">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_srl">$is_srl</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_101_0110011;</span></span>
<span class="line" line-num="112" source-line-num="112">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sra">$is_sra</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b1_101_0110011;</span></span>
<span class="line" line-num="113" source-line-num="113">         </span>
<span class="line" line-num="114" source-line-num="114">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_or">$is_or</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_110_0110011;</span></span>
<span class="line" line-num="115" source-line-num="115">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_and">$is_and</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_111_0110011;</span></span>
<span class="line" line-num="116" source-line-num="116">         </span>
<span class="line" line-num="117" source-line-num="117">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_load">$is_load</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$opcode">$opcode</span> <span class="tlv_ident_hdl_code">==  7'b0000011;</span></span>
<span class="line" line-num="118" source-line-num="118">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_lui">$is_lui</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$opcode">$opcode</span> <span class="tlv_ident_hdl_code">==  7'b0110111;</span></span>
<span class="line" line-num="119" source-line-num="119">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_auipc">$is_auipc</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$opcode">$opcode</span> <span class="tlv_ident_hdl_code">==  7'b0010111;</span></span>
<span class="line" line-num="120" source-line-num="120">         </span>
<span class="line" line-num="121" source-line-num="121">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_jal">$is_jal</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$opcode">$opcode</span> <span class="tlv_ident_hdl_code">==  7'b1101111;</span></span>
<span class="line" line-num="122" source-line-num="122">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_jalr">$is_jalr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_000_1100111;</span></span>
<span class="tlx_except_node_anchor no-select"><span class=tlx_except_container>
         <span class="tlx_except" sev="warning" title="Signal |cpu$is_sb is assigned but never used.
To silence this message use &quot;`BOGUS_USE($is_sb)&quot;.">      </span></span></span><span class="line" line-num="123" source-line-num="123">         </span>
<span class="line" line-num="124" source-line-num="124">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sb">$is_sb</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_000_0100011;</span></span>
<span class="tlx_except_node_anchor no-select"><span class=tlx_except_container>         <span class="tlx_except" sev="warning" title="Signal |cpu$is_sh is assigned but never used.
To silence this message use &quot;`BOGUS_USE($is_sh)&quot;.">      </span></span></span><span class="line" line-num="125" source-line-num="125">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sh">$is_sh</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_001_0100011;</span></span>
<span class="tlx_except_node_anchor no-select"><span class=tlx_except_container>         <span class="tlx_except" sev="warning" title="Signal |cpu$is_sw is assigned but never used.
To silence this message use &quot;`BOGUS_USE($is_sw)&quot;.">      </span></span></span><span class="line" line-num="126" source-line-num="126">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sw">$is_sw</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_010_0100011;</span></span>
<span class="line" line-num="127" source-line-num="127">         </span>
<span class="line" line-num="128" source-line-num="128">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_slti">$is_slti</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_010_0010011;</span></span>
<span class="line" line-num="129" source-line-num="129">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_sltiu">$is_sltiu</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_011_0010011;</span></span>
<span class="line" line-num="130" source-line-num="130">         </span>
<span class="line" line-num="131" source-line-num="131">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_xori">$is_xori</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_100_0010011;</span></span>
<span class="line" line-num="132" source-line-num="132">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_ori">$is_ori</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_110_0010011;</span></span>
<span class="line" line-num="133" source-line-num="133">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_andi">$is_andi</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'bx_111_0010011;</span></span>
<span class="line" line-num="134" source-line-num="134">         </span>
<span class="line" line-num="135" source-line-num="135">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_slli">$is_slli</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_001_0010011;</span></span>
<span class="line" line-num="136" source-line-num="136">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_srli">$is_srli</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b0_101_0010011;</span></span>
<span class="line" line-num="137" source-line-num="137">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_srai">$is_srai</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dec_bits">$dec_bits</span> <span class="tlv_ident_hdl_code">==? 11'b1_101_0010011;</span></span>
<span class="line" line-num="138" source-line-num="138">               </span>
<span class="line" line-num="139" source-line-num="139">         <span class="tlv_ident_comment">//Assigning source register values to Regiter file Read (Rf_rd)</span></span>
<span class="line" line-num="140" source-line-num="140">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rd_valid">$rd_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_i_instr">$is_i_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_r_instr">$is_r_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_u_instr">$is_u_instr</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_j_instr">$is_j_instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="141" source-line-num="141">         <span class="tlv_ident_when">?$rd_valid</span></span>
<span class="line" line-num="142" source-line-num="142">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rd">$rd</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">11</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="143" source-line-num="143">            </span>
<span class="line" line-num="144" source-line-num="144">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_en1">$rf_rd_en1</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rs1_valid">$rs1_valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="145" source-line-num="145">         <span class="tlv_ident_when">?$rf_rd_en1</span></span>
<span class="line" line-num="146" source-line-num="146">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_index1">$rf_rd_index1</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rs1">$rs1</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="147" source-line-num="147">            </span>
<span class="line" line-num="148" source-line-num="148">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_en2">$rf_rd_en2</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rs2_valid">$rs2_valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="149" source-line-num="149">         <span class="tlv_ident_when">?$rf_rd_en2</span></span>
<span class="line" line-num="150" source-line-num="150">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_index2">$rf_rd_index2</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rs2">$rs2</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="151" source-line-num="151">         <span class="tlv_ident_comment">//[UPDATE: RF BYPASSED]Assigning inputs of ALU with Rf_rd Outputs &lt;&lt;Note:rd means read&gt;&gt;</span></span>
<span class="line" line-num="152" source-line-num="152">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_index">$rf_wr_index</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_index1">$rf_rd_index1</span><span class="tlv_ident_hdl_code">) &amp;&amp; </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_en">$rf_wr_en</span><span class="tlv_ident_hdl_code">) ? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$result">$result</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_data1">$rf_rd_data1</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="153" source-line-num="153">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_index">$rf_wr_index</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_index2">$rf_rd_index2</span><span class="tlv_ident_hdl_code">) &amp;&amp; </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_en">$rf_wr_en</span><span class="tlv_ident_hdl_code">) ? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@6">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$result">$result</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_data2">$rf_rd_data2</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="154" source-line-num="154">         </span>
<span class="line" line-num="155" source-line-num="155">         <span class="tlv_ident_comment">//Compute $br_tgt_pc (PC + imm)</span></span>
<span class="line" line-num="156" source-line-num="156">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$br_tgt_pc">$br_tgt_pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="157" source-line-num="157">         <span class="tlv_ident_comment">// added $jalr_target_pc</span></span>
<span class="line" line-num="158" source-line-num="158">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$jalr_tgt_pc">$jalr_tgt_pc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="159" source-line-num="159">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@6">@3</span>   </span>
<span class="line" line-num="160" source-line-num="160">         <span class="tlv_ident_comment">//Intermediate signals</span></span>
<span class="line" line-num="161" source-line-num="161">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$sltu_result">$sltu_result</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="162" source-line-num="162">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$sltiu_result">$sltiu_result</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="163" source-line-num="163">         <span class="tlv_ident_comment">//Assign the ALU $results</span></span>
<span class="line" line-num="164" source-line-num="164">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$result">$result</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_addi">$is_addi</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="165" source-line-num="165">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_add">$is_add</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="166" source-line-num="166">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_load">$is_load</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="167" source-line-num="167">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="168" source-line-num="168">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_andi">$is_andi</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="169" source-line-num="169">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_ori">$is_ori</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="170" source-line-num="170">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_xori">$is_xori</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">^ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="171" source-line-num="171">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_slli">$is_slli</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt;&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="172" source-line-num="172">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_srli">$is_srli</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&gt;&gt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="173" source-line-num="173">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_and">$is_and</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="174" source-line-num="174">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_or">$is_or</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="175" source-line-num="175">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_xor">$is_xor</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">^ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="176" source-line-num="176">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_sub">$is_sub</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">- </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="177" source-line-num="177">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_sll">$is_sll</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt;&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="178" source-line-num="178">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_srl">$is_srl</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&gt;&gt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="179" source-line-num="179">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_sltu">$is_sltu</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="180" source-line-num="180">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_sltiu">$is_sltiu</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="181" source-line-num="181">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_lui">$is_lui</span> <span class="tlv_ident_hdl_code">? { </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">12</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">,12'b0 } :</span></span>
<span class="line" line-num="182" source-line-num="182">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_auipc">$is_auipc</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="183" source-line-num="183">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jal">$is_jal</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="184" source-line-num="184">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jalr">$is_jalr</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$pc">$pc</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="185" source-line-num="185">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_slt">$is_slt</span> <span class="tlv_ident_hdl_code">? ((</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">) ? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$sltu_result">$sltu_result</span> <span class="tlv_ident_hdl_code">: { 31'b0 , </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">} ) :</span></span>
<span class="line" line-num="186" source-line-num="186">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_slti">$is_slti</span> <span class="tlv_ident_hdl_code">? ((</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">) ? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$sltiu_result">$sltiu_result</span> <span class="tlv_ident_hdl_code">: { 31'b0 , </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">} ) :</span></span>
<span class="line" line-num="187" source-line-num="187">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_sra">$is_sra</span> <span class="tlv_ident_hdl_code">? { {32{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">} &gt;&gt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="188" source-line-num="188">                         <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_srai">$is_srai</span> <span class="tlv_ident_hdl_code">? { {32{</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}}, </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">} &gt;&gt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imm">$imm</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">: </span></span>
<span class="line" line-num="189" source-line-num="189">                         <span class="tlv_ident_hdl_code">32'bx;</span></span>
<span class="line" line-num="190" source-line-num="190">         </span>
<span class="line" line-num="191" source-line-num="191">         <span class="tlv_ident_comment">//Register File Write (Rf_wr) //Modification wrt load</span></span>
<span class="line" line-num="192" source-line-num="192">         <span class="tlv_ident_when">?$valid</span></span>
<span class="line" line-num="193" source-line-num="193">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_wr_data">$rf_wr_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= !</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$ld_data">$ld_data</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$result">$result</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="194" source-line-num="194">            <span class="tlv_ident_comment">//$rf_wr_data[31:0] = $valid ? $result : &gt;&gt;2$ld_data ;</span></span>
<span class="line" line-num="195" source-line-num="195">            <span class="tlv_ident_comment">//$rf_wr_data[31:0] = $result;</span></span>
<span class="line" line-num="196" source-line-num="196">            <span class="tlv_ident_comment">//$rf_wr_data[31:0] = &gt;&gt;2$valid_ld ? &gt;&gt;2$ld_data : $result;</span></span>
<span class="line" line-num="197" source-line-num="197">         </span>
<span class="line" line-num="198" source-line-num="198">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_wr_en">$rf_wr_en</span> <span class="tlv_ident_hdl_code">= ( (</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rd">$rd</span> <span class="tlv_ident_hdl_code">!= 5'b0) &amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rd_valid">$rd_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">) || </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="199" source-line-num="199">         <span class="tlv_ident_when">?$rf_wr_en</span></span>
<span class="line" line-num="200" source-line-num="200">            <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_wr_index">$rf_wr_index</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">4</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rd">$rd</span><span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rd">$rd</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="201" source-line-num="201">         </span>
<span class="line" line-num="202" source-line-num="202">         <span class="tlv_ident_comment">//Taken Branch determined</span></span>
<span class="line" line-num="203" source-line-num="203">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$taken_br">$taken_br</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_beq">$is_beq</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="204" source-line-num="204">                     <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_bne">$is_bne</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">!= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="205" source-line-num="205">                     <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_blt">$is_blt</span> <span class="tlv_ident_hdl_code">? (</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_hdl_code">) ^ (</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">!= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">) :</span></span>
<span class="line" line-num="206" source-line-num="206">                     <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_bge">$is_bge</span> <span class="tlv_ident_hdl_code">? (</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&gt;= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_hdl_code">) ^ (</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">!= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">) :</span></span>
<span class="line" line-num="207" source-line-num="207">                     <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_bltu">$is_bltu</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&lt; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="208" source-line-num="208">                     <span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_bgeu">$is_bgeu</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src1_value">$src1_value</span> <span class="tlv_ident_hdl_code">&gt;= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="209" source-line-num="209">                     <span class="tlv_ident_hdl_code">1'b0;         </span></span>
<span class="line" line-num="210" source-line-num="210">         <span class="tlv_ident_comment">//New valid.</span></span>
<span class="line" line-num="211" source-line-num="211">         <span class="tlv_ident_comment">//$valid = $reset ? 0 : ( $start ? 1 : !(&gt;&gt;1$valid_taken_br || &gt;&gt;2$valid_taken_br || &gt;&gt;1$valid_ld || &gt;&gt;2$valid_ld));</span></span>
<span class="line" line-num="212" source-line-num="212">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$reset">$reset</span> <span class="tlv_ident_hdl_code">? 0 : !(</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@8">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_taken_br">$valid_taken_br</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_taken_br">$valid_taken_br</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@8">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="213" source-line-num="213">         <span class="tlv_ident_comment">//$valid = !(&gt;&gt;1$valid_taken_br || &gt;&gt;2$valid_taken_br || &gt;&gt;1$valid_ld || &gt;&gt;2$valid_ld);</span></span>
<span class="line" line-num="214" source-line-num="214">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$valid_ld">$valid_ld</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_load">$is_load</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="215" source-line-num="215">         <span class="tlv_ident_comment">//Introducing $valid_taken_br</span></span>
<span class="line" line-num="216" source-line-num="216">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$valid_taken_br">$valid_taken_br</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$taken_br">$taken_br</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="217" source-line-num="217">         </span>
<span class="line" line-num="218" source-line-num="218">         <span class="tlv_ident_comment">//Adding Jump branching instructions</span></span>
<span class="line" line-num="219" source-line-num="219">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$is_jump">$is_jump</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jal">$is_jal</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jalr">$is_jalr</span> <span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="220" source-line-num="220">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$valid_jump">$valid_jump</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_jump">$is_jump</span> <span class="tlv_ident_hdl_code">; </span></span>
<span class="line" line-num="221" source-line-num="221">         </span>
<span class="line" line-num="222" source-line-num="222">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@8">@4</span> </span>
<span class="line" line-num="223" source-line-num="223">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dmem_wr_en">$dmem_wr_en</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_s_instr">$is_s_instr</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$valid">$valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="224" source-line-num="224">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dmem_rd_en">$dmem_rd_en</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$is_load">$is_load</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="225" source-line-num="225">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dmem_addr">$dmem_addr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$result">$result</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="226" source-line-num="226">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dmem_wr_data">$dmem_wr_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$src2_value">$src2_value</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="227" source-line-num="227">      <span class="tlv_ident_comment">// Note: Because of the magic we are using for visualisation, if visualisation is enabled below,</span></span>
<span class="line" line-num="228" source-line-num="228">      <span class="tlv_ident_comment">//       be sure to avoid having unassigned signals (which you might be using for random inputs)</span></span>
<span class="line" line-num="229" source-line-num="229">      <span class="tlv_ident_comment">//       other than those specifically expected in the labs. You'll get strange errors for these.</span></span>
<span class="line" line-num="230" source-line-num="230">      <span class="tlv_ident_stage_expr" logical_entity="|cpu@10">@5</span></span>
<span class="line" line-num="231" source-line-num="231">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$ld_data">$ld_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_rd_data">$dmem_rd_data</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="232" source-line-num="232">   <span class="tlv_ident_comment">// Assert these to end simulation (before Makerchip cycle limit).</span></span>
<span class="line" line-num="233" source-line-num="233">   <span class="tlv_ident_comment">//*passed = *cyc_cnt &gt; 107;</span></span>
<span class="line" line-num="234" source-line-num="234">   <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">passed = </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_beh_hier_2" logical_entity="|cpu/xreg"tlx_ref="">/xreg</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_hdl_code">15</span><span class="tlv_ident_beh_hier_2">]</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;5</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu/xreg$value">$value</span> <span class="tlv_ident_hdl_code">== (1+2+3+4+5+6+7+8+9);</span></span>
<span class="line" line-num="235" source-line-num="235">   <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">failed = 1'b0;</span></span>
<span class="line" line-num="236" source-line-num="236">   </span>
<span class="line" line-num="237" source-line-num="237">   <span class="tlv_ident_comment">// Macro instantiations for:</span></span>
<span class="line" line-num="238" source-line-num="238">   <span class="tlv_ident_comment">//  o instruction memory</span></span>
<span class="line" line-num="239" source-line-num="239">   <span class="tlv_ident_comment">//  o register file</span></span>
<span class="line" line-num="240" source-line-num="240">   <span class="tlv_ident_comment">//  o data memory</span></span>
<span class="line" line-num="241" source-line-num="241">   <span class="tlv_ident_comment">//  o CPU visualization</span></span>
<span class="line" line-num="242" source-line-num="242">   <span class="tlv_ident_pipeline" logical_entity="|cpu">|cpu</span></span>
<span class="line" line-num="243" source-line-num="243">      <span class="tlv_ident_keyword1">\source /raw.githubusercontent.com/stevehoover/RISCVMYTHWorkshop/c1719d5b338896577b79ee76c2f443ca2a76e14f/tlvlib/riscvshelllib.tlv 16   </span><span class="tlv_ident_comment">// Instantiated from top.tlv, 243 as: m4+imem(@1)    // Args: (read stage)</span></span>
<span class="line" line-num="244" source-line-num="243">         <span class="tlv_ident_comment">// Instruction Memory containing program defined by m4_asm(...) instantiations.</span></span>
<span class="line" line-num="245" source-line-num="243">         <span class="tlv_ident_stage_expr" logical_entity="|cpu@2">@1</span></span>
<span class="line" line-num="246" source-line-num="243">            <span class="tlv_ident_keyword1">\SV_plus</span></span>
<span class="line" line-num="247" source-line-num="243">               <span class="tlv_ident_comment">// The program in an instruction memory.</span></span>
<span class="line" line-num="248" source-line-num="243">               <span class="tlv_ident_hdl_code">logic [31:0] instrs [0:10-1];</span></span>
<span class="line" line-num="249" source-line-num="243">               <span class="tlv_ident_hdl_code">assign instrs = '{</span></span>
<span class="line" line-num="250" source-line-num="243">                  <span class="tlv_ident_hdl_code">{7'b0000000, 5'd0, 5'd0, 3'b000, 5'd10, 7'b0110011}, {7'b0000000, 5'd0, 5'd10, 3'b000, 5'd14, 7'b0110011}, {12'b1010, 5'd10, 3'b000, 5'd12, 7'b0010011}, {7'b0000000, 5'd0, 5'd10, 3'b000, 5'd13, 7'b0110011}, {7'b0000000, 5'd14, 5'd13, 3'b000, 5'd14, 7'b0110011}, {12'b1, 5'd13, 3'b000, 5'd13, 7'b0010011}, {1'b1, 6'b111111, 5'd12, 5'd13, 3'b100, 4'b1100, 1'b1, 7'b1100011}, {7'b0000000, 5'd0, 5'd14, 3'b000, 5'd10, 7'b0110011}, {7'b0000000, 5'd10, 5'd0, 3'b010, 5'b00100, 7'b0100011}, {12'b100, 5'd0, 3'b010, 5'd15, 7'b0000011}</span></span>
<span class="line" line-num="251" source-line-num="243">               <span class="tlv_ident_hdl_code">};</span></span>
<span class="line" line-num="252" source-line-num="243">            <span class="tlv_ident_beh_hier_2" logical_entity="|cpu/imem">/imem</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_hdl_code">9</span><span class="tlv_ident_beh_hier_2">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_2">]</span></span>
<span class="line" line-num="253" source-line-num="243">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu/imem$instr">$instr</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">instrs</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">[</span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">imem</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">];</span></span>
<span class="line" line-num="254" source-line-num="243">            <span class="tlv_ident_when">?$imem_rd_en</span></span>
<span class="line" line-num="255" source-line-num="243">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$imem_rd_data">$imem_rd_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_2" logical_entity="|cpu/imem"tlx_ref="">/imem</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$imem_rd_addr">$imem_rd_addr</span><span class="tlv_ident_beh_hier_2">]</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu/imem$instr">$instr</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="256" source-line-num="243">          </span>
<span class="line" line-num="257" source-line-num="243">      <span class="tlv_ident_keyword1">\end_source    </span><span class="tlv_ident_comment">// Args: (read stage)</span></span>
<span class="line" line-num="258" source-line-num="244">      <span class="tlv_ident_keyword1">\source /raw.githubusercontent.com/stevehoover/RISCVMYTHWorkshop/c1719d5b338896577b79ee76c2f443ca2a76e14f/tlvlib/riscvshelllib.tlv 33   </span><span class="tlv_ident_comment">// Instantiated from top.tlv, 244 as: m4+rf(@2, @3)  // Args: (read stage, write stage) - if equal, no register bypass is required</span></span>
<span class="line" line-num="259" source-line-num="244">         <span class="tlv_ident_comment">// Reg File</span></span>
<span class="line" line-num="260" source-line-num="244">         <span class="tlv_ident_stage_expr" logical_entity="|cpu@6">@3</span></span>
<span class="line" line-num="261" source-line-num="244">            <span class="tlv_ident_beh_hier_2" logical_entity="|cpu/xreg">/xreg</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_beh_hier_2">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_2">]</span></span>
<span class="line" line-num="262" source-line-num="244">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu/xreg$wr">$wr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_en">$rf_wr_en</span> <span class="tlv_ident_hdl_code">&amp;&amp; (</span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_index">$rf_wr_index</span> <span class="tlv_ident_hdl_code">!= 5'b0) &amp;&amp; (</span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_index">$rf_wr_index</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">xreg);</span></span>
<span class="line" line-num="263" source-line-num="244">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu/xreg$value">$value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$reset">$reset</span> <span class="tlv_ident_hdl_code">?   </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">xreg           :</span></span>
<span class="line" line-num="264" source-line-num="244">                              <span class="tlv_ident_pipe_sig" logical_entity="|cpu/xreg$wr">$wr</span>        <span class="tlv_ident_hdl_code">?   </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_wr_data">$rf_wr_data</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="265" source-line-num="244">                                             <span class="tlv_ident_sig_keyword" logical_entity="|cpu/xreg$value">$RETAIN</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="266" source-line-num="244">         <span class="tlv_ident_stage_expr" logical_entity="|cpu@4">@2</span></span>
<span class="line" line-num="267" source-line-num="244">            <span class="tlv_ident_when">?$rf_rd_en1</span></span>
<span class="line" line-num="268" source-line-num="244">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_data1">$rf_rd_data1</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_2" logical_entity="|cpu/xreg"tlx_ref="">/xreg</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_index1">$rf_rd_index1</span><span class="tlv_ident_beh_hier_2">]</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@8">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu/xreg$value">$value</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="269" source-line-num="244">            <span class="tlv_ident_when">?$rf_rd_en2</span></span>
<span class="line" line-num="270" source-line-num="244">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$rf_rd_data2">$rf_rd_data2</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_2" logical_entity="|cpu/xreg"tlx_ref="">/xreg</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_index2">$rf_rd_index2</span><span class="tlv_ident_beh_hier_2">]</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@8">&gt;&gt;2</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu/xreg$value">$value</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="271" source-line-num="244">            <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_data1">$rf_rd_data1</span> <span class="tlv_ident_pipe_sig" logical_entity="|cpu$rf_rd_data2">$rf_rd_data2</span><span class="tlv_ident_hdl_code">) </span></span>
<span class="line" line-num="272" source-line-num="244">      <span class="tlv_ident_keyword1">\end_source  </span><span class="tlv_ident_comment">// Args: (read stage, write stage) - if equal, no register bypass is required</span></span>
<span class="line" line-num="273" source-line-num="245">      <span class="tlv_ident_keyword1">\source /raw.githubusercontent.com/stevehoover/RISCVMYTHWorkshop/c1719d5b338896577b79ee76c2f443ca2a76e14f/tlvlib/riscvshelllib.tlv 50   </span><span class="tlv_ident_comment">// Instantiated from top.tlv, 245 as: m4+dmem(@4)    // Args: (read/write stage)</span></span>
<span class="line" line-num="274" source-line-num="245">         <span class="tlv_ident_comment">// Data Memory</span></span>
<span class="line" line-num="275" source-line-num="245">         <span class="tlv_ident_stage_expr" logical_entity="|cpu@8">@4</span></span>
<span class="line" line-num="276" source-line-num="245">            <span class="tlv_ident_beh_hier_2" logical_entity="|cpu/dmem">/dmem</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_hdl_code">15</span><span class="tlv_ident_beh_hier_2">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_2">]</span></span>
<span class="line" line-num="277" source-line-num="245">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu/dmem$wr">$wr</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_wr_en">$dmem_wr_en</span> <span class="tlv_ident_hdl_code">&amp;&amp; (</span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_addr">$dmem_addr</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">dmem);</span></span>
<span class="line" line-num="278" source-line-num="245">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu/dmem$value">$value</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$reset">$reset</span> <span class="tlv_ident_hdl_code">?   </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">dmem :</span></span>
<span class="line" line-num="279" source-line-num="245">                              <span class="tlv_ident_pipe_sig" logical_entity="|cpu/dmem$wr">$wr</span>        <span class="tlv_ident_hdl_code">?   </span><span class="tlv_ident_pipeline" logical_entity="|cpu"tlx_ref="">|cpu</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_wr_data">$dmem_wr_data</span> <span class="tlv_ident_hdl_code">:</span></span>
<span class="line" line-num="280" source-line-num="245">                                             <span class="tlv_ident_sig_keyword" logical_entity="|cpu/dmem$value">$RETAIN</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="281" source-line-num="245">                                        </span>
<span class="line" line-num="282" source-line-num="245">            <span class="tlv_ident_when">?$dmem_rd_en</span></span>
<span class="line" line-num="283" source-line-num="245">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|cpu$dmem_rd_data">$dmem_rd_data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_2" logical_entity="|cpu/dmem"tlx_ref="">/dmem</span><span class="tlv_ident_beh_hier_2">[</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_addr">$dmem_addr</span><span class="tlv_ident_beh_hier_2">]</span><span class="tlv_ident_alignment_ahead_expr" logical_entity="|cpu@10">&gt;&gt;1</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu/dmem$value">$value</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="284" source-line-num="245">            <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="|cpu$dmem_rd_data">$dmem_rd_data</span><span class="tlv_ident_hdl_code">)</span></span>
<span class="line" line-num="285" source-line-num="245">      <span class="tlv_ident_keyword1">\end_source    </span><span class="tlv_ident_comment">// Args: (read/write stage)</span></span>
<span class="line" line-num="286" source-line-num="246"></span>
<span class="line" line-num="287" source-line-num="247">   <span class="tlv_ident_comment">//m4+cpu_viz(@4)    // For visualisation, argument should be at least equal to the last stage of CPU logic</span></span>
<span class="line" line-num="288" source-line-num="248">                       <span class="tlv_ident_comment">// @4 would work for all labs</span></span>
<span class="line" line-num="289" source-line-num="249"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="290" source-line-num="250">   <span class="tlv_ident_hdl_code">endmodule</span></span>

</pre>

</body>
</html>
