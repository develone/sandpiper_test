<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta http-equiv="description" content="index.html">
   <meta http-equiv="keywords" content="tl-verilog">

   <title>top.m4 -> top.sv & top_gen.sv</title>

   <link rel="stylesheet" href="tlx.css" />
<!--Load styles for stats page-->
<link rel="stylesheet" href="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/stats.css" />
<!--Load the AJAX API-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://www.rweda.com/lib/sp_1.9-2018_02_11-beta/stats.js"></script>
<script type="text/javascript">

  function getTitle() {
    return "top.m4 -> top.sv & top_gen.sv";
  }

  function chartData() {
    return [
      ['File(s)', 'Unknown', 'Untouched', 'Logic', 'Declarations', 'Staging', 'Structure', 'Validity', 'Gating', '(Instrumentation)', { role: 'style' }, '(Comments)', { role: 'style' }, '(Whitespace)', { role: 'style' }],
      ['top.m4', 0, 286, 267, 0, 0, 65, 0, 0, 0, 'opacity: 0.1', 471, 'opacity: 0.1', 302, 'opacity: 0.1'],
      ['top.sv', 0, 286, 433, 20, 0, 118, 0, 0, 0, 'opacity: 0.1', 581, 'opacity: 0.1', 331, 'opacity: 0.1'],
      ['top_gen.sv', 0, 0, 0, 150, 128, 116, 0, 0, 441, 'opacity: 0.1', 644, 'opacity: 0.1', 437, 'opacity: 0.1'],
      ['SV Total', 0, 286, 433, 170, 128, 234, 0, 0, 441, 'opacity: 0.1', 1225, 'opacity: 0.1', 768, 'opacity: 0.1']
    ];
  }

  function chartColors() {
    return ['DarkGray', '#305050', 'purple', 'blue', '#509050', '#1090c0', '#E04010', 'orange', '#C0C0F0', '#C04040', 'gray'];
  };
</script>
</head>

<body>

    <div id="four_square">
        <div id="chart_div" class="cell left top"></div>
        <div id="gen_div" class="cell code right top">
<h2>top_gen.sv</h2>

<pre>
<span class="tlx_comments">// Generated by SandPiper(TM) 1.9-2018/02/11-beta from Redwood EDA.
// (Installed here: /home/devel/SandPiper_1.9-2018_02_11-beta_distro.)
// Redwood EDA does not claim intellectual property rights to this file and provides no warranty regarding its correctness or quality.


</span><span class="tlx_structure">`include &quot;sandpiper_gen.vh&quot;


genvar slice;


</span><span class="tlx_comments">//
// Signals declared top-level.
//

// For $value.
</span><span class="tlx_declarations">logic [8-1:0] L0_value_a0;

</span><span class="tlx_comments">// For /slice$Value.
</span><span class="tlx_declarations">logic [8-1:0] Slice_Value_n1,
              Slice_Value_a0;

</span><span class="tlx_comments">// For /slice$carry_out.
</span><span class="tlx_declarations">logic Slice_carry_out_a0 [8-1:0];

</span><span class="tlx_comments">// For /tb$Value.
</span><span class="tlx_declarations">logic [8-1:0] Tb_Value_n1,
              Tb_Value_a0;

</span><span class="tlx_comments">// For /tb$error.
</span><span class="tlx_declarations">logic Tb_error_a0;


</span><span class="tlx_structure">
generate
</span><span class="tlx_comments">

   //
   // Scope: /slice[8-1:0]
   //
   </span><span class="tlx_structure">for (slice = 0; slice &lt;= 8-1; slice++) begin : L1gen_Slice
</span><span class="tlx_comments">      // For $Value.
      </span><span class="tlx_staging">always_ff @(posedge clk) Slice_Value_a0[slice] &lt;= Slice_Value_n1[slice];

   </span><span class="tlx_structure">end

   </span><span class="tlx_comments">//
   // Scope: /tb
   //

      // For $Value.
      </span><span class="tlx_staging">always_ff @(posedge clk) Tb_Value_a0[8-1:0] &lt;= Tb_Value_n1[8-1:0];




</span><span class="tlx_structure">endgenerate




</span><span class="tlx_comments">//
// Debug Signals
//

</span><span class="tlx_instrumentation">generate

   if (1) begin : DEBUG_SIGS

      logic [8-1:0] \@0$value ;
      assign \@0$value = L0_value_a0;

      </span><span class="tlx_comments">//
      // Scope: /slice[8-1:0]
      //
      </span><span class="tlx_instrumentation">for (slice = 0; slice &lt;= 8-1; slice++) begin : \/slice 
         logic  \@-1$Value ;
         assign \@-1$Value = Slice_Value_n1[slice];
         logic  \@0$carry_in ;
         assign \@0$carry_in = L1_Slice[slice].L1_carry_in_a0;
         logic  \@0$carry_out ;
         assign \@0$carry_out = Slice_carry_out_a0[slice];
      end

      </span><span class="tlx_comments">//
      // Scope: /tb
      //
      </span><span class="tlx_instrumentation">if (1) begin : \/tb 
         logic [8-1:0] \@-1$Value ;
         assign \@-1$Value = Tb_Value_n1;
         logic  \@0$error ;
         assign \@0$error = Tb_error_a0;
      end


   end

endgenerate




</span><span class="tlx_structure">generate   </span><span class="tlx_comments">// This is awkward, but we need to go into 'generate' context in the line that `includes the declarations file.
</span>
</pre>
        </div>
        <div id="tlx_div" class="cell code left bottom">
<h2>top.m4</h2>

<pre>
<span class="tlx_structure">\TLV_version 1d: tl-x.org
\SV

   </span><span class="tlx_comments">// ===========
   // Incrementer
   // ===========

   // An incrementer implemented bit-level using hierarchy for the bit slice.
   // Testbench compares with result of + operator.

   </span><span class="tlx_untouched">module top(input logic clk, input logic reset, input logic [31:0] cyc_cnt, output logic passed, output logic failed);    </span><span class="tlx_comments">/* verilator lint_save */ /* verilator lint_off UNOPTFLAT */  </span><span class="tlx_untouched">bit [256:0] RW_rand_raw; bit [256+63:0] RW_rand_vect; pseudo_rand #(.WIDTH(257)) pseudo_rand (clk, reset, RW_rand_raw[256:0]); assign RW_rand_vect[256+63:0] = {RW_rand_raw[62:0], RW_rand_raw};  </span><span class="tlx_comments">/* verilator lint_restore */  /* verilator lint_off WIDTH */ /* verilator lint_off UNOPTFLAT */
</span><span class="tlx_structure">\TLV
   
   
   </span><span class="tlx_comments">// The incrementer
   </span><span class="tlx_structure">/slice[</span><span class="tlx_logic">8-1</span><span class="tlx_structure">:</span><span class="tlx_logic">0</span><span class="tlx_structure">]
      </span><span class="tlx_comments">// Get carry in from previous slice (or 1 into slice 0).
      </span><span class="tlx_logic">$carry_in = (#slice == 0) ? 1'b1
                                : </span><span class="tlx_structure">/slice[</span><span class="tlx_logic">(#slice - 1) % 8</span><span class="tlx_structure">]</span><span class="tlx_logic">$carry_out;
      $Value &lt;= *reset ? 1'b0    </span><span class="tlx_comments">// reset to zero
                       </span><span class="tlx_logic">: $Value ^ $carry_in;
      $carry_out = $Value &amp;&amp; $carry_in;
   
   </span><span class="tlx_comments">// Combine output bits into a vector.
   </span><span class="tlx_logic">$value[8-1:0] = </span><span class="tlx_structure">/slice[</span><span class="tlx_logic">*</span><span class="tlx_structure">]</span><span class="tlx_logic">$Value;
   
   
   </span><span class="tlx_comments">// Testbench
   </span><span class="tlx_structure">/tb
      </span><span class="tlx_logic">$Value[8-1:0] &lt;= *reset ? 8'b0 : $Value + 8'b1;
      $error = </span><span class="tlx_structure">/top</span><span class="tlx_logic">$value != $Value;
   
      </span><span class="tlx_comments">// End simulation
      </span><span class="tlx_logic">*failed = ! *reset &amp;&amp; $error;
      *passed = $Value == 8'd30 &amp;&amp; *cyc_cnt &gt;= 32'd30;
</span><span class="tlx_structure">\SV
   </span><span class="tlx_untouched">endmodule
</span>
</pre>
        </div>
        <div id="trans_div" class="cell code right bottom">
<h2>top.sv</h2>

<pre>
<span class="tlx_structure">`line 2 &quot;top.tlv&quot; 0 </span><span class="tlx_comments">//_\TLV_version 1d: tl-x.org, generated by SandPiper(TM) 1.9-2018/02/11-beta
</span><span class="tlx_structure">`include &quot;sp_default.vh&quot; </span><span class="tlx_comments">//_\SV

   // ===========
   // Incrementer
   // ===========

   // An incrementer implemented bit-level using hierarchy for the bit slice.
   // Testbench compares with result of + operator.

   </span><span class="tlx_untouched">module top(input logic clk, input logic reset, input logic [31:0] cyc_cnt, output logic passed, output logic failed);    </span><span class="tlx_comments">/* verilator lint_save */ /* verilator lint_off UNOPTFLAT */  </span><span class="tlx_untouched">bit [256:0] RW_rand_raw; bit [256+63:0] RW_rand_vect; pseudo_rand #(.WIDTH(257)) pseudo_rand (clk, reset, RW_rand_raw[256:0]); assign RW_rand_vect[256+63:0] = {RW_rand_raw[62:0], RW_rand_raw};  </span><span class="tlx_comments">/* verilator lint_restore */  /* verilator lint_off WIDTH */ /* verilator lint_off UNOPTFLAT */
</span><span class="tlx_structure">`include &quot;top_gen.sv&quot; </span><span class="tlx_comments">//_\TLV
   
   
   // The incrementer
   </span><span class="tlx_structure">for (slice = 0; slice &lt;= 8-1; slice++) begin : L1_Slice </span><span class="tlx_declarations">logic L1_carry_in_a0; </span><span class="tlx_comments">//_/slice
      // Get carry in from previous slice (or 1 into slice 0).
      </span><span class="tlx_logic">assign L1_carry_in_a0 = (slice == 0) ? 1'b1
                                : Slice_carry_out_a0[(slice - 1) % 8];
      assign Slice_Value_n1[slice] = reset ? 1'b0    </span><span class="tlx_comments">// reset to zero
                       </span><span class="tlx_logic">: Slice_Value_a0[slice] ^ L1_carry_in_a0;
      assign Slice_carry_out_a0[slice] = Slice_Value_a0[slice] &amp;&amp; L1_carry_in_a0; </span><span class="tlx_structure">end
   
   </span><span class="tlx_comments">// Combine output bits into a vector.
   </span><span class="tlx_logic">assign L0_value_a0[8-1:0] = Slice_Value_a0;
   
   
   </span><span class="tlx_comments">// Testbench
   //_/tb
      </span><span class="tlx_logic">assign Tb_Value_n1[8-1:0] = reset ? 8'b0 : Tb_Value_a0 + 8'b1;
      assign Tb_error_a0 = L0_value_a0 != Tb_Value_a0;
   
      </span><span class="tlx_comments">// End simulation
      </span><span class="tlx_logic">assign failed = ! reset &amp;&amp; Tb_error_a0;
      assign passed = Tb_Value_a0 == 8'd30 &amp;&amp; cyc_cnt &gt;= 32'd30; </span><span class="tlx_structure">endgenerate
</span><span class="tlx_comments">//_\SV
   </span><span class="tlx_untouched">endmodule
</span>
</pre>
        </div>
    </div>
    <canvas id="overlay" width="280" height="200">
    </canvas>
    <svg id="sp_svg" x="429" y="430" width="112" height="40">
      <rect id="sp_rect" x="2" y="2" width="108" height="36" rx="10" ry="10" />
      <text id="sp_text" x="7" y="25" textLength="98">SandPiper</text>
    </svg>

</body>
</html>
